!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("CoinsLogonWidget",[],e):"object"==typeof exports?exports.CoinsLogonWidget=e():t.CoinsLogonWidget=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){a.call(this,t);var e=r.EVENTS,n=this,i=h.assertString(t.authCookieName,"authCookieName"),s=h.assertString(t.baseUrl,"baseUrl");this.element=h.assertElement(t.el),this._options={authCookieName:i,baseUrl:s},this._options.messages=t.messages?c({},l,t.messages):l,this._options.checkAuth="boolean"==typeof t.checkAuth&&t.checkAuth,this._options.redirect="boolean"==typeof t.redirect&&t.redirect,this._options.redirectUrl="string"==typeof t.redirectUrl?t.redirectUrl:void 0,this._state={horizontal:!!t.horizontal,isLoggedIn:!1,onSubmit:this.login.bind(this),passwordProps:{id:p("coins-logon-widget-"),name:"password",type:"password"},redirectUrl:this._options.redirectUrl,usernameProps:{id:p("coins-logon-widget-"),name:"username"}},o.setOptions({authCookieName:i,baseUrl:s}),this.on(e.LOGIN,this.login),this.on(e.LOGIN_ERROR,this.onError),this.on(e.LOGIN_ACCOUNT_EXPIRED,this.onAccountExpired),this.on(e.LOGIN_ACCOUNT_WILL_EXPIRE,this.onAccountWillExpire),this.on(e.LOGIN_PASSWORD_EXPIRED,this.onPasswordExpired),this.on(e.LOGIN_PASSWORD_WILL_EXPIRE,this.onPasswordWillExpire),this.on(e.LOGIN_SUCCESS,this.onLogin),this.on(e.LOGOUT,this.logout),this.on(e.LOGOUT_ERROR,this.onError),this.on(e.LOGOUT_SUCCESS,this.onLogout),this.init(),this._options.checkAuth&&o.isLoggedIn().then(function(t){t&&n.emit(e.LOGIN_SUCCESS,{username:o.getUsername()})})}var o=n(1),i=n(37),s=n(50),a=n(55),u=n(56),c=n(2),l=n(79),f=n(59),p=n(80),h=n(82);r.prototype=Object.create(a.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.update(null),this.removeAllListeners()},r.prototype.getFormData=function(){var t=this.element.querySelector("input[name=password]").value,e=this.element.querySelector("input[name=username]").value;return{password:t,username:e}},r.prototype.init=function(){this._tree=u(this._state),this._rootNode=i(this._tree),this.element.className=this.element.className+" coins-logon-widget",this.element.appendChild(this._rootNode)},r.prototype.login=function(){var t,e=this,n=r.EVENTS,i=this.getFormData(),s=i.password,a=i.username;return a&&s?(this.update({isLoading:!0}),o.login(a,s).then(function(t){var o=Date.parse(t.user.acctExpDate),i=r.DAY,s=Date.now(),a=Date.parse(t.user.passwordExpDate);return e.update({isLoading:!1}),o-s<10*i?e.emit(n.LOGIN_ACCOUNT_WILL_EXPIRE,t):a-s<10*i?e.emit(n.LOGIN_PASSWORD_WILL_EXPIRE,t):e.emit(n.LOGIN_SUCCESS,t),t},function(t){return e.update({isLoading:!1}),"Password expired"===t?e.emit(n.LOGIN_PASSWORD_EXPIRED,t):"Account expired"===t?e.emit(n.LOGIN_ACCOUNT_EXPIRED,t):e.emit(n.LOGIN_ERROR,t),t})):(t={},a||(t.usernameProps={errorMessage:"Missing username!",onKeyPress:this.onKeyPress.bind(this)},this.emit(n.INVALID,{field:"username"})),s||(t.passwordProps={errorMessage:"Missing password!",onKeyPress:this.onKeyPress.bind(this)},this.emit(n.INVALID,{field:"password"})),this.update(t))},r.prototype.logout=function(){var t=r.EVENTS,e=this;return this.update({isLoading:!0}),o.logout().then(function(n){return e.update({isLoading:!1}),e.emit(t.LOGOUT_SUCCESS,n),n},function(n){return e.update({isLoading:!1}),e.emit(t.LOGOUT_ERROR,n),n})},r.prototype.update=function(t){if(t!==this._state){if(this._state=c({},this._state,t),this._state.isLoggedIn)this._state.passwordProps.value="";else{var e=this.getFormData();this._state.passwordProps.value=e.password,this._state.usernameProps.value=e.username}var n=u(this._state),r=s(this._tree,n);this._rootNode=f(this._rootNode,r),this._tree=n}},r.prototype.onAccountExpired=function(){var t=h.callOrReturn(this._options.messages.accountExpired);this.update({errorMessage:t})},r.prototype.onAccountWillExpire=function(t){var e=Date.parse(t.user.acctExpDate),n=Date.now(),o=h.callOrReturn(this._options.messages.accountWillExpire,[h.formatDay((e-n)/r.DAY)]);this.update({errorMessage:o})},r.prototype.onError=function(t){var e;e="undefined"!=typeof t?t.message||t.toString():"Unknown error!",this.update({errorMessage:e}),console.error(t)},r.prototype.onKeyPress=function(t){var e={errorMessage:null,onKeyPress:null};"username"===t.target.name&&this.update({usernameProps:e}),"password"===t.target.name&&this.update({passwordProps:e})},r.prototype.onLogin=function(t){this._options.redirect&&this._options.redirectUrl?window.location=this._options.redirectUrl:this.update({isLoggedIn:!0,username:t.username})},r.prototype.onLogout=function(){this.update({isLoggedIn:!1})},r.prototype.onPasswordExpired=function(){var t=h.callOrReturn(this._options.messages.passwordExpired);this.update({errorMessage:t})},r.prototype.onPasswordWillExpire=function(t){var e=Date.parse(t.user.passwordExpDate),n=Date.now(),o=h.callOrReturn(this._options.messages.passwordWillExpire,[h.formatDay((e-n)/r.DAY)]);this.update({errorMessage:o})},r.DAY=864e5,r.EVENTS={INVALID:"invalid",LOGIN:"login:init",LOGIN_ERROR:"login:error",LOGIN_ACCOUNT_EXPIRED:"login:accountExpired",LOGIN_ACCOUNT_WILL_EXPIRE:"login:accountWillExpire",LOGIN_PASSWORD_EXPIRED:"login:passwordExpired",LOGIN_PASSWORD_WILL_EXPIRE:"login:passwordWillExpire",LOGIN_SUCCESS:"login:success",LOGOUT:"logout:init",LOGOUT_ERROR:"logout:error",LOGOUT_SUCCESS:"logout:success"},t.exports=r},function(t,e,n){"use strict";function r(){return JSON.parse(localStorage.getItem(w))}function o(t){return localStorage.setItem(w,JSON.stringify(t)),r()}function i(t,e,n){var r=m.client.header(t,e,{credentials:n});return{Authorization:r.field}}function s(t){var e=u();return e.baseUrl+t}function a(){var t=u().authCookieName,e=location.hostname.split("."),n={path:"/"};return e.length>2?n.domain="."+e.slice(-2).join("."):n.domain=e.join("."),n?(y.remove(t,n),y.remove(t)):y.remove(t),o({date:Date.now(),status:"logged out"}),[].slice.call(arguments)}function u(){return x}function c(t){return g(x,t),u()}function l(t){return t.data[0]}function f(t){var e,n=t.statusText;return t.responseText&&(e=JSON.parse(t.responseText)||{},e=(e.error||{}).message||""),e||n||"Unknown error"}function p(){var t=r();return"username"in t?t.username:""}function h(t,e){var n=jQuery.Deferred();return jQuery.ajax({data:{password:btoa(e),username:btoa(t)},dataType:"json",type:"POST",url:s("/auth/keys"),xhrFields:{withCredentials:!0}}).done(function(t){var e=l(t);o(e),n.resolve(e)}).fail(function(t){n.reject(f(t))}),n.promise()}function d(){var t=r(),e="DELETE",n=s("/auth/keys/"+t.id);return jQuery.ajax({dataType:"json",headers:i(n,e,t),type:e,url:n,xhrFields:{withCredentials:!0}}).then(l,f).then(a,a)}function v(){var t,e,n=y.get(u().authCookieName),o=r();return n&&o&&(!(o instanceof Object)||"id"in o&&"key"in o)?(t="GET",e=s("/auth/cookies/"+n),jQuery.ajax({dataType:"json",type:t,url:e,xhrFields:{withCredentials:!0}}).then(function(t){return"error"in t&&!t.error},function(){return!1})):jQuery.Deferred().resolve(!1)}var g=n(2),y=n(35),m=n(36),w="COINS_AUTH_CREDENTIALS",x={authCookieName:"",baseUrl:""};document.cookie.split("; ").indexOf("REMOVED")!==-1&&(document.cookie="=REMOVED;path=/;domain=.mrn.org;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),t.exports={getOptions:u,setOptions:c,login:h,logout:d,isLoggedIn:v,getUsername:p}},function(t,e,n){var r=n(3),o=n(30),i=o(r);t.exports=i},function(t,e,n){function r(t,e,n,p,h){if(!u(t))return t;var d=a(e)&&(s(e)||l(e)),v=d?void 0:f(e);return o(v||e,function(o,s){if(v&&(s=o,o=e[s]),c(o))p||(p=[]),h||(h=[]),i(t,e,s,r,n,p,h);else{var a=t[s],u=n?n(a,o,s,t,e):void 0,l=void 0===u;l&&(u=o),void 0===u&&(!d||s in t)||!l&&(u===u?u===a:a!==a)||(t[s]=u)}}),t}var o=n(4),i=n(5),s=n(13),a=n(8),u=n(17),c=n(12),l=n(25),f=n(28);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function r(t,e,n,r,f,p,h){for(var d=p.length,v=e[n];d--;)if(p[d]==v)return void(t[n]=h[d]);var g=t[n],y=f?f(g,v,n,t,e):void 0,m=void 0===y;m&&(y=v,a(v)&&(s(v)||c(v))?y=s(g)?g:a(g)?o(g):[]:u(v)||i(v)?y=i(g)?l(g):u(g)?g:{}:m=!1),p.push(v),h.push(y),m?t[n]=r(y,v,f,p,h):(y===y?y!==g:g===g)&&(t[n]=y)}var o=n(6),i=n(7),s=n(13),a=n(8),u=n(18),c=n(25),l=n(26);t.exports=r},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function r(t){return i(t)&&o(t)&&a.call(t,"callee")&&!u.call(t,"callee")}var o=n(8),i=n(12),s=Object.prototype,a=s.hasOwnProperty,u=s.propertyIsEnumerable;t.exports=r},function(t,e,n){function r(t){return null!=t&&i(o(t))}var o=n(9),i=n(11);t.exports=r},function(t,e,n){var r=n(10),o=r("length");t.exports=o},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){var r=n(14),o=n(11),i=n(12),s="[object Array]",a=Object.prototype,u=a.toString,c=r(Array,"isArray"),l=c||function(t){return i(t)&&o(t.length)&&u.call(t)==s};t.exports=l},function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return o(n)?n:void 0}var o=n(15);t.exports=r},function(t,e,n){function r(t){return null!=t&&(o(t)?l.test(u.call(t)):i(t)&&s.test(t))}var o=n(16),i=n(12),s=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,c=a.hasOwnProperty,l=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){return o(t)&&a.call(t)==i}var o=n(17),i="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){function r(t){var e;if(!s(t)||l.call(t)!=a||i(t)||!c.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return o(t,function(t,e){n=e}),void 0===n||c.call(t,n)}var o=n(19),i=n(7),s=n(12),a="[object Object]",u=Object.prototype,c=u.hasOwnProperty,l=u.toString;t.exports=r},function(t,e,n){function r(t,e){return o(t,e,i)}var o=n(20),i=n(23);t.exports=r},function(t,e,n){var r=n(21),o=r();t.exports=o},function(t,e,n){function r(t){return function(e,n,r){for(var i=o(e),s=r(e),a=s.length,u=t?a:-1;t?u--:++u<a;){var c=s[u];if(n(i[c],c,i)===!1)break}return e}}var o=n(22);t.exports=r},function(t,e,n){function r(t){return o(t)?t:Object(t)}var o=n(17);t.exports=r},function(t,e,n){function r(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(i(t)||o(t))&&e||0;for(var n=t.constructor,r=-1,c="function"==typeof n&&n.prototype===t,f=Array(e),p=e>0;++r<e;)f[r]=r+"";for(var h in t)p&&s(h,e)||"constructor"==h&&(c||!l.call(t,h))||f.push(h);return f}var o=n(7),i=n(13),s=n(24),a=n(11),u=n(17),c=Object.prototype,l=c.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&t<e}var r=/^\d+$/,o=9007199254740991;t.exports=n},function(t,e,n){function r(t){return i(t)&&o(t.length)&&!!A[j.call(t)]}var o=n(11),i=n(12),s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",v="[object RegExp]",g="[object Set]",y="[object String]",m="[object WeakMap]",w="[object ArrayBuffer]",x="[object Float32Array]",_="[object Float64Array]",O="[object Int8Array]",E="[object Int16Array]",b="[object Int32Array]",N="[object Uint8Array]",k="[object Uint8ClampedArray]",S="[object Uint16Array]",L="[object Uint32Array]",A={};A[x]=A[_]=A[O]=A[E]=A[b]=A[N]=A[k]=A[S]=A[L]=!0,A[s]=A[a]=A[w]=A[u]=A[c]=A[l]=A[f]=A[p]=A[h]=A[d]=A[v]=A[g]=A[y]=A[m]=!1;var I=Object.prototype,j=I.toString;t.exports=r},function(t,e,n){function r(t){return o(t,i(t))}var o=n(27),i=n(23);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){var r=n(14),o=n(8),i=n(17),s=n(29),a=r(Object,"keys"),u=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?s(t):i(t)?a(t):[]}:s;t.exports=u},function(t,e,n){function r(t){for(var e=u(t),n=e.length,r=n&&t.length,c=!!r&&a(r)&&(i(t)||o(t)),f=-1,p=[];++f<n;){var h=e[f];(c&&s(h,r)||l.call(t,h))&&p.push(h)}return p}var o=n(7),i=n(13),s=n(24),a=n(11),u=n(23),c=Object.prototype,l=c.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,c=s>1?n[s-1]:void 0;for("function"==typeof a?(a=o(a,c,5),s-=2):(a="function"==typeof c?c:void 0,s-=a?1:0),u&&i(n[0],n[1],u)&&(a=s<3?void 0:a,s=1);++r<s;){var l=n[r];l&&t(e,l,a)}return e})}var o=n(31),i=n(33),s=n(34);t.exports=r},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return o;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}var o=n(32);t.exports=r},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;if("number"==r?o(n)&&i(e,n.length):"string"==r&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}var o=n(8),i=n(24),s=n(17);t.exports=r},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=s,t.apply(this,a)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){var r,o;!function(i){var s=!1;if(r=i,o="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==o&&(t.exports=o)),s=!0,t.exports=i(),s=!0,!s){var a=window.Cookies,u=window.Cookies=i();u.noConflict=function(){return window.Cookies=a,u}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(n){function r(e,o,i){var s;if("undefined"!=typeof document){if(arguments.length>1){if(i=t({path:"/"},r.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(t){}o=n.write?n.write(o,e):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var u="";for(var c in i)i[c]&&(u+="; "+c,i[c]!==!0&&(u+="="+i[c]));return document.cookie=e+"="+o+u}e||(s={});for(var l=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,p=0;p<l.length;p++){var h=l[p].split("="),d=h.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var v=h[0].replace(f,decodeURIComponent);if(d=n.read?n.read(d,v):n(d,v)||d.replace(f,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(t){}if(e===v){s=d;break}e||(s[v]=d)}catch(t){}}return s}}return r.set=r,r.get=function(t){return r.call(r,t)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(e,n){r(e,"",t(n,{expires:-1}))},r.withConverter=e,r}return e(function(){})})},function(t,e){var n={internals:{}};n.client={header:function(t,e,r){var o={field:"",artifacts:{}};if(!t||"string"!=typeof t&&"object"!=typeof t||!e||"string"!=typeof e||!r||"object"!=typeof r)return o.err="Invalid argument type",o;var i=r.timestamp||n.utils.now(r.localtimeOffsetMsec),s=r.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return o.err="Invalid credentials object",o;if(n.crypto.algorithms.indexOf(s.algorithm)===-1)return o.err="Unknown algorithm",o;"string"==typeof t&&(t=n.utils.parseUri(t));var a={ts:i,nonce:r.nonce||n.utils.randomString(6),method:e,resource:t.resource,host:t.host,port:t.port,hash:r.hash,ext:r.ext,app:r.app,dlg:r.dlg};o.artifacts=a,a.hash||!r.payload&&""!==r.payload||(a.hash=n.crypto.calculatePayloadHash(r.payload,s.algorithm,r.contentType));var u=n.crypto.calculateMac("header",s,a),c=null!==a.ext&&void 0!==a.ext&&""!==a.ext,l='Hawk id="'+s.id+'", ts="'+a.ts+'", nonce="'+a.nonce+(a.hash?'", hash="'+a.hash:"")+(c?'", ext="'+n.utils.escapeHeaderAttribute(a.ext):"")+'", mac="'+u+'"';return a.app&&(l+=', app="'+a.app+(a.dlg?'", dlg="'+a.dlg:"")+'"'),o.field=l,o},bewit:function(t,e){if(!t||"string"!=typeof t||!e||"object"!=typeof e||!e.ttlSec)return"";e.ext=null===e.ext||void 0===e.ext?"":e.ext;var r=n.utils.now(e.localtimeOffsetMsec),o=e.credentials;if(!(o&&o.id&&o.key&&o.algorithm))return"";if(n.crypto.algorithms.indexOf(o.algorithm)===-1)return"";t=n.utils.parseUri(t);var i=r+e.ttlSec,s=n.crypto.calculateMac("bewit",o,{ts:i,nonce:"",method:"GET",resource:t.resource,host:t.host,port:t.port,ext:e.ext}),a=o.id+"\\"+i+"\\"+s+"\\"+e.ext;return n.utils.base64urlEncode(a)},authenticate:function(t,e,r,o){o=o||{};var i=function(e){return t.getResponseHeader?t.getResponseHeader(e):t.getHeader(e)},s=i("www-authenticate");if(s){var a=n.utils.parseAuthorizationHeader(s,["ts","tsm","error"]);if(!a)return!1;if(a.ts){var u=n.crypto.calculateTsMac(a.ts,e);if(u!==a.tsm)return!1;n.utils.setNtpOffset(a.ts-Math.floor((new Date).getTime()/1e3))}}var c=i("server-authorization");if(!c&&!o.required)return!0;var l=n.utils.parseAuthorizationHeader(c,["mac","ext","hash"]);if(!l)return!1;var f={ts:r.ts,nonce:r.nonce,method:r.method,resource:r.resource,host:r.host,port:r.port,hash:l.hash,ext:l.ext,app:r.app,dlg:r.dlg},p=n.crypto.calculateMac("response",e,f);if(p!==l.mac)return!1;if(!o.payload&&""!==o.payload)return!0;if(!l.hash)return!1;var h=n.crypto.calculatePayloadHash(o.payload,e.algorithm,i("content-type"));return h===l.hash},message:function(t,e,r,o){if(!t||"string"!=typeof t||!e||"number"!=typeof e||null===r||void 0===r||"string"!=typeof r||!o||"object"!=typeof o)return null;var i=o.timestamp||n.utils.now(o.localtimeOffsetMsec),s=o.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return null;if(n.crypto.algorithms.indexOf(s.algorithm)===-1)return null;var a={ts:i,nonce:o.nonce||n.utils.randomString(6),host:t,port:e,hash:n.crypto.calculatePayloadHash(r,s.algorithm)},u={id:s.id,ts:a.ts,nonce:a.nonce,hash:a.hash,mac:n.crypto.calculateMac("message",s,a)};return u},authenticateTimestamp:function(t,e,r){var o=n.crypto.calculateTsMac(t.ts,e);return o===t.tsm&&(r!==!1&&n.utils.setNtpOffset(t.ts-Math.floor((new Date).getTime()/1e3)),!0)}},n.crypto={headerVersion:"1",algorithms:["sha1","sha256"],calculateMac:function(t,e,o){var i=n.crypto.generateNormalizedString(t,o),s=r["Hmac"+e.algorithm.toUpperCase()](i,e.key);return s.toString(r.enc.Base64)},generateNormalizedString:function(t,e){var r="hawk."+n.crypto.headerVersion+"."+t+"\n"+e.ts+"\n"+e.nonce+"\n"+(e.method||"").toUpperCase()+"\n"+(e.resource||"")+"\n"+e.host.toLowerCase()+"\n"+e.port+"\n"+(e.hash||"")+"\n";return e.ext&&(r+=e.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",e.app&&(r+=e.app+"\n"+(e.dlg||"")+"\n"),r},calculatePayloadHash:function(t,e,o){var i=r.algo[e.toUpperCase()].create();return i.update("hawk."+n.crypto.headerVersion+".payload\n"),i.update(n.utils.parseContentType(o)+"\n"),i.update(t),i.update("\n"),i.finalize().toString(r.enc.Base64)},calculateTsMac:function(t,e){var o=r["Hmac"+e.algorithm.toUpperCase()]("hawk."+n.crypto.headerVersion+".ts\n"+t+"\n",e.key);return o.toString(r.enc.Base64)}},n.internals.LocalStorage=function(){this._cache={},this.length=0,this.getItem=function(t){return this._cache.hasOwnProperty(t)?String(this._cache[t]):null},this.setItem=function(t,e){this._cache[t]=String(e),this.length=Object.keys(this._cache).length},this.removeItem=function(t){delete this._cache[t],this.length=Object.keys(this._cache).length},this.clear=function(){this._cache={},this.length=0},this.key=function(t){return Object.keys(this._cache)[t||0]}},n.utils={storage:new n.internals.LocalStorage,setStorage:function(t){var e=n.utils.storage.getItem("hawk_ntp_offset");n.utils.storage=t,e&&n.utils.setNtpOffset(e)},setNtpOffset:function(t){try{n.utils.storage.setItem("hawk_ntp_offset",t)}catch(t){console.error("[hawk] could not write to storage."),console.error(t)}},getNtpOffset:function(){var t=n.utils.storage.getItem("hawk_ntp_offset");return t?parseInt(t,10):0},now:function(t){return Math.floor(((new Date).getTime()+(t||0))/1e3)+n.utils.getNtpOffset()},escapeHeaderAttribute:function(t){return t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},parseContentType:function(t){return t?t.split(";")[0].replace(/^\s+|\s+$/g,"").toLowerCase():""},parseAuthorizationHeader:function(t,e){if(!t)return null;var n=t.match(/^(\w+)(?:\s+(.*))?$/);if(!n)return null;var r=n[1];if("hawk"!==r.toLowerCase())return null;var o=n[2];if(!o)return null;var i={},s=o.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(t,n,r){if(e.indexOf(n)!==-1&&null!==r.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)&&!i.hasOwnProperty(n))return i[n]=r,""});return""!==s?null:i},randomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=e.length,r=[],o=0;o<t;++o)r[o]=e[Math.floor(Math.random()*n)];return r.join("")},uriRegex:/^([^:]+)\:\/\/(?:[^@]*@)?([^\/:]+)(?:\:(\d+))?([^#]*)(?:#.*)?$/,parseUri:function(t){var e=t.match(n.utils.uriRegex);if(!e)return{host:"",port:"",resource:""};var r=e[1].toLowerCase(),o={host:e[2],port:e[3]||("http"===r?"80":"https"===r?"443":""),resource:e[4]};return o},base64urlEncode:function(t){var e=r.enc.Utf8.parse(t),n=r.enc.Base64.stringify(e);return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}};var r=r||function(t,e){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var o=0;o<t;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;o<t;o+=4)e[r+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},u=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var o=e[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=o/(4*i),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*i,o=t.min(4*e,o),e){for(var u=0;u<e;u+=i)this._doProcessBlock(r,u);u=r.splice(0,e),n.sigBytes-=o}return new s.init(u,o)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);!function(){var t=r,e=t.lib,n=e.WordArray,o=e.Hasher,i=[],e=t.algo.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=0;80>c;c++){if(16>c)i[c]=0|t[e+c];else{var l=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=l<<1|l>>>31}l=(r<<5|r>>>27)+u+i[c],l=20>c?l+((o&s|~o&a)+1518500249):40>c?l+((o^s^a)+1859775393):60>c?l+((o&s|o&a|s&a)-1894007588):l+((o^s^a)-899497514),u=a,a=s,s=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(r+64>>>9<<4)+15]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=o._createHelper(e),t.HmacSHA1=o._createHmacHelper(e)}(),function(t){for(var e=r,n=e.lib,o=n.WordArray,i=n.Hasher,n=e.algo,s=[],a=[],u=function(t){return 4294967296*(t-(0|t))|0},c=2,l=0;64>l;){var f;t:{f=c;for(var p=t.sqrt(f),h=2;h<=p;h++)if(!(f%h)){f=!1;break t}f=!0}f&&(8>l&&(s[l]=u(t.pow(c,.5))),a[l]=u(t.pow(c,1/3)),l++),c++}var d=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],p=0;64>p;p++){if(16>p)d[p]=0|t[e+p];else{var h=d[p-15],v=d[p-2];d[p]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+d[p-7]+((v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10)+d[p-16]}h=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+a[p]+d[p],v=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),f=l,l=c,c=u,u=s+h|0,s=i,i=o,o=r,r=h+v|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=r,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,o=4*r;n.sigBytes>o&&(n=t.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),a=i.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=r,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var o=0;o<n;o+=3)for(var i=(e[o>>>2]>>>24-8*(o%4)&255)<<16|(e[o+1>>>2]>>>24-8*((o+1)%4)&255)<<8|e[o+2>>>2]>>>24-8*((o+2)%4)&255,s=0;4>s&&o+.75*s<n;s++)t.push(r.charAt(i>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,o=r.charAt(64);o&&(o=t.indexOf(o),-1!=o&&(n=o));for(var o=[],i=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(t.charAt(s-1))<<2*(s%4),u=r.indexOf(t.charAt(s))>>>6-2*(s%4);o[i>>>2]|=(a|u)<<24-8*(i%4),i++}return e.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.crypto.internals=r,"undefined"!=typeof t&&t.exports&&(t.exports=n)},function(t,e,n){var r=n(38);t.exports=r},function(t,e,n){function r(t,e){var n=e?e.document||o:o,l=e?e.warn:null;if(t=c(t).a,u(t))return t.init();if(a(t))return n.createTextNode(t.text);if(!s(t))return l&&l("Item is not a valid virtual dom node",t),null;var f=null===t.namespace?n.createElement(t.tagName):n.createElementNS(t.namespace,t.tagName),p=t.properties;i(f,p);for(var h=t.children,d=0;d<h.length;d++){var v=r(h[d],e);v&&f.appendChild(v)}return f}var o=n(39),i=n(41),s=n(44),a=n(46),u=n(47),c=n(48);t.exports=r},function(t,e,n){(function(e){var r,o="undefined"!=typeof e?e:"undefined"!=typeof window?window:{},i=n(40);"undefined"!=typeof document?r=document:(r=o["__GLOBAL_DOCUMENT_CACHE@4"],r||(r=o["__GLOBAL_DOCUMENT_CACHE@4"]=i)),t.exports=r}).call(e,function(){return this}())},function(t,e){},function(t,e,n){function r(t,e,n){for(var r in e){var s=e[r];void 0===s?o(t,r,s,n):u(s)?(o(t,r,s,n),s.hook&&s.hook(t,r,n?n[r]:void 0)):a(s)?i(t,e,n,r,s):t[r]=s}}function o(t,e,n,r){if(r){var o=r[e];if(u(o))o.unhook&&o.unhook(t,e,n);else if("attributes"===e)for(var i in o)t.removeAttribute(i);else if("style"===e)for(var s in o)t.style[s]="";else"string"==typeof o?t[e]="":t[e]=null}}function i(t,e,n,r,o){var i=n?n[r]:void 0;if("attributes"!==r){if(i&&a(i)&&s(i)!==s(o))return void(t[r]=o);a(t[r])||(t[r]={});var u="style"===r?"":void 0;for(var c in o){var l=o[c];t[r][c]=void 0===l?u:l}}else for(var f in o){var p=o[f];void 0===p?t.removeAttribute(f):t.setAttribute(f,p)}}function s(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}var a=n(42),u=n(43);t.exports=r},function(t,e){"use strict";t.exports=function(t){return"object"==typeof t&&null!==t}},function(t,e){function n(t){return t&&("function"==typeof t.hook&&!t.hasOwnProperty("hook")||"function"==typeof t.unhook&&!t.hasOwnProperty("unhook"))}t.exports=n},function(t,e,n){function r(t){return t&&"VirtualNode"===t.type&&t.version===o}var o=n(45);t.exports=r},function(t,e){t.exports="2"},function(t,e,n){function r(t){return t&&"VirtualText"===t.type&&t.version===o}var o=n(45);t.exports=r},function(t,e){function n(t){return t&&"Widget"===t.type}t.exports=n},function(t,e,n){function r(t,e){var n=t,r=e;return u(e)&&(r=o(e,t)),u(t)&&(n=o(t,null)),{a:n,b:r}}function o(t,e){var n=t.vnode;if(n||(n=t.vnode=t.render(e)),!(i(n)||s(n)||a(n)))throw new Error("thunk did not return a valid node");return n}var i=n(44),s=n(46),a=n(47),u=n(49);t.exports=r},function(t,e){function n(t){return t&&"Thunk"===t.type}t.exports=n},function(t,e,n){var r=n(51);t.exports=r},function(t,e,n){function r(t,e){var n={a:t};return o(t,e,n,0),n}function o(t,e,n,r){if(t!==e){var o=n[r],a=!1;if(_(t)||_(e))u(t,e,n,r);else if(null==e)x(t)||(s(t,n,r),o=n[r]),o=v(o,new y(y.REMOVE,t,e));else if(m(e))if(m(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var c=E(t.properties,e.properties);
c&&(o=v(o,new y(y.PROPS,t,c))),o=i(t,e,n,o,r)}else o=v(o,new y(y.VNODE,t,e)),a=!0;else o=v(o,new y(y.VNODE,t,e)),a=!0;else w(e)?w(t)?t.text!==e.text&&(o=v(o,new y(y.VTEXT,t,e))):(o=v(o,new y(y.VTEXT,t,e)),a=!0):x(e)&&(x(t)||(a=!0),o=v(o,new y(y.WIDGET,t,e)));o&&(n[r]=o),a&&s(t,n,r)}}function i(t,e,n,r,i){for(var s=t.children,a=p(s,e.children),u=a.children,c=s.length,l=u.length,f=c>l?c:l,h=0;h<f;h++){var d=s[h],g=u[h];i+=1,d?o(d,g,n,i):g&&(r=v(r,new y(y.INSERT,null,g))),m(d)&&d.count&&(i+=d.count)}return a.moves&&(r=v(r,new y(y.ORDER,t,a.moves))),r}function s(t,e,n){l(t,e,n),a(t,e,n)}function a(t,e,n){if(x(t))"function"==typeof t.destroy&&(e[n]=v(e[n],new y(y.REMOVE,t,null)));else if(m(t)&&(t.hasWidgets||t.hasThunks))for(var r=t.children,o=r.length,i=0;i<o;i++){var s=r[i];n+=1,a(s,e,n),m(s)&&s.count&&(n+=s.count)}else _(t)&&u(t,null,e,n)}function u(t,e,n,o){var i=O(t,e),s=r(i.a,i.b);c(s)&&(n[o]=new y(y.THUNK,null,s))}function c(t){for(var e in t)if("a"!==e)return!0;return!1}function l(t,e,n){if(m(t)){if(t.hooks&&(e[n]=v(e[n],new y(y.PROPS,t,f(t.hooks)))),t.descendantHooks||t.hasThunks)for(var r=t.children,o=r.length,i=0;i<o;i++){var s=r[i];n+=1,l(s,e,n),m(s)&&s.count&&(n+=s.count)}}else _(t)&&u(t,null,e,n)}function f(t){var e={};for(var n in t)e[n]=void 0;return e}function p(t,e){var n=d(e),r=n.keys,o=n.free;if(o.length===e.length)return{children:e,moves:null};var i=d(t),s=i.keys,a=i.free;if(a.length===t.length)return{children:e,moves:null};for(var u=[],c=0,l=o.length,f=0,p=0;p<t.length;p++){var v,g=t[p];g.key?r.hasOwnProperty(g.key)?(v=r[g.key],u.push(e[v])):(v=p-f++,u.push(null)):c<l?(v=o[c++],u.push(e[v])):(v=p-f++,u.push(null))}for(var y=c>=o.length?e.length:o[c],m=0;m<e.length;m++){var w=e[m];w.key?s.hasOwnProperty(w.key)||u.push(w):m>=y&&u.push(w)}for(var x,_=u.slice(),O=0,E=[],b=[],N=0;N<e.length;){var k=e[N];for(x=_[O];null===x&&_.length;)E.push(h(_,O,null)),x=_[O];x&&x.key===k.key?(O++,N++):k.key?(x&&x.key&&r[x.key]!==N+1?(E.push(h(_,O,x.key)),x=_[O],x&&x.key===k.key?O++:b.push({key:k.key,to:N})):b.push({key:k.key,to:N}),N++):x&&x.key&&E.push(h(_,O,x.key))}for(;O<_.length;)x=_[O],E.push(h(_,O,x&&x.key));return E.length!==f||b.length?{children:u,moves:{removes:E,inserts:b}}:{children:u,moves:null}}function h(t,e,n){return t.splice(e,1),{from:e,key:n}}function d(t){for(var e={},n=[],r=t.length,o=0;o<r;o++){var i=t[o];i.key?e[i.key]=o:n.push(o)}return{keys:e,free:n}}function v(t,e){return t?(g(t)?t.push(e):t=[t,e],t):e}var g=n(52),y=n(53),m=n(44),w=n(46),x=n(47),_=n(49),O=n(48),E=n(54);t.exports=r},function(t,e){function n(t){return"[object Array]"===o.call(t)}var r=Array.isArray,o=Object.prototype.toString;t.exports=r||n},function(t,e,n){function r(t,e,n){this.type=Number(t),this.vNode=e,this.patch=n}var o=n(45);r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,t.exports=r,r.prototype.version=o,r.prototype.type="VirtualPatch"},function(t,e,n){function r(t,e){var n;for(var a in t){a in e||(n=n||{},n[a]=void 0);var u=t[a],c=e[a];if(u!==c)if(i(u)&&i(c))if(o(c)!==o(u))n=n||{},n[a]=c;else if(s(c))n=n||{},n[a]=c;else{var l=r(u,c);l&&(n=n||{},n[a]=l)}else n=n||{},n[a]=c}for(var f in e)f in t||(n=n||{},n[f]=e[f]);return n}function o(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}var i=n(42),s=n(43);t.exports=r},function(t,e,n){var r;(function(){"use strict";function e(){}function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var s=e.prototype,a=this,u=a.EventEmitter;s.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp){e={};for(n in r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n])}else e=r[t]||(r[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},s.addListener=function(t,e){var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&o(r[n],e)===-1&&r[n].push(i?e:{listener:e,once:!1});return this},s.on=i("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=i("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&(n=o(i[r],e),n!==-1&&i[r].splice(n,1));return this},s.off=i("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var r,o,i=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)i.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(o=e[r])&&("function"==typeof o?i.call(this,r,o):s.call(this,r,o));return this},s.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},s.removeAllListeners=i("removeEvent"),s.emitEvent=function(t,e){var n,r,o,i,s,a=this.getListenersAsObject(t);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=n.length;o--;)r=n[o],r.once===!0&&this.removeListener(t,r.listener),s=r.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},s.trigger=i("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return a.EventEmitter=u,e},r=function(){return e}.call(a,n,a,t),!(void 0!==r&&(t.exports=r))}).call(this)},function(t,e,n){"use strict";function r(t){var e,n=t.errorMessage,r=!!t.horizontal,l=(t.inputs,"undefined"!=typeof t.isLoading&&t.isLoading),f="undefined"!=typeof t.isLoggedIn&&t.isLoggedIn,p=t.onSubmit,h=t.passwordProps,d=t.redirectUrl,v=t.username,g=t.usernameProps,y=[],m="coins-logon-widget-form";return r&&(m+=" coins-logon-widget-form-horizontal"),f?(e=[{style:"secondary",text:"Log Out",type:"submit"}],d&&e.push({href:d,text:"Go to COINS →",type:"link"}),y.push(u({username:v}),o.apply(null,e))):(n&&(y.push(a({text:n})),m+=" coins-logon-widget-form-error"),y.push(i(g),i(h),o({text:"Log In",type:"submit"}))),l&&(y.push(s()),m+=" coins-logon-widget-form-loading"),new c("form",{className:m,onsubmit:function(t){t.preventDefault(),p(t)},method:"post"},y)}var o=n(57),i=n(75),s=n(76),a=n(77),u=n(78),c=n(58).VNode;t.exports=r},function(t,e,n){"use strict";function r(t){var e="coins-logon-widget-button",n=t.href,r=t.onClick,o=t.style||"primary",a=t.text,u=t.type||"button";e+=" coins-logon-widget-button-"+o;var c,l={className:e};return"link"===u?(c="a",n&&(l.href=n)):(c="button",l.type=u),r&&(l.onclick=function(t){t.preventDefault(),r(t)}),new i(c,l,[new s(a)])}function o(t){var e=arguments.length>1?[].slice.call(arguments).map(r):[r(t)],n="coins-logon-widget-button-group";return new i("div",{className:n},e)}var i=n(58).VNode,s=n(58).VText;t.exports=o},function(t,e,n){var r=n(50),o=n(59),i=n(64),s=n(37),a=n(66),u=n(67);t.exports={diff:r,patch:o,h:i,create:s,VNode:a,VText:u}},function(t,e,n){var r=n(60);t.exports=r},function(t,e,n){function r(t,e,n){return n=n||{},n.patch=n.patch&&n.patch!==r?n.patch:o,n.render=n.render||c,n.patch(t,e,n)}function o(t,e,n){var r=s(e);if(0===r.length)return t;var o=l(t,e.a,r),u=t.ownerDocument;n.document||u===a||(n.document=u);for(var c=0;c<r.length;c++){var f=r[c];t=i(t,o[f],e[f],n)}return t}function i(t,e,n,r){if(!e)return t;var o;if(u(n))for(var i=0;i<n.length;i++)o=f(n[i],e,r),e===t&&(t=o);else o=f(n,e,r),e===t&&(t=o);return t}function s(t){var e=[];for(var n in t)"a"!==n&&e.push(Number(n));return e}var a=n(39),u=n(52),c=n(38),l=n(61),f=n(62);t.exports=r},function(t,e){function n(t,e,n,o){return n&&0!==n.length?(n.sort(i),r(t,e,n,o,0)):{}}function r(t,e,n,i,a){if(i=i||{},t){o(n,a,a)&&(i[a]=t);var u=e.children;if(u)for(var c=t.childNodes,l=0;l<e.children.length;l++){a+=1;var f=u[l]||s,p=a+(f.count||0);o(n,a,p)&&r(c[l],f,n,i,a),a=p}}return i}function o(t,e,n){if(0===t.length)return!1;for(var r,o,i=0,s=t.length-1;i<=s;){if(r=(s+i)/2>>0,o=t[r],i===s)return o>=e&&o<=n;if(o<e)i=r+1;else{if(!(o>n))return!0;s=r-1}}return!1}function i(t,e){return t>e?1:-1}var s={};t.exports=n},function(t,e,n){function r(t,e,n){var r=t.type,c=t.vNode,h=t.patch;switch(r){case d.REMOVE:return o(e,c);case d.INSERT:return i(e,h,n);case d.VTEXT:return s(e,c,h,n);case d.WIDGET:return a(e,c,h,n);case d.VNODE:return u(e,c,h,n);case d.ORDER:return l(e,h),e;case d.PROPS:return p(e,h,c.properties),e;case d.THUNK:return f(e,n.patch(e,h,n));default:return e}}function o(t,e){var n=t.parentNode;return n&&n.removeChild(t),c(t,e),null}function i(t,e,n){var r=n.render(e,n);return t&&t.appendChild(r),t}function s(t,e,n,r){var o;if(3===t.nodeType)t.replaceData(0,t.length,n.text),o=t;else{var i=t.parentNode;o=r.render(n,r),i&&o!==t&&i.replaceChild(o,t)}return o}function a(t,e,n,r){var o,i=v(e,n);o=i?n.update(e,t)||t:r.render(n,r);var s=t.parentNode;return s&&o!==t&&s.replaceChild(o,t),i||c(t,e),o}function u(t,e,n,r){var o=t.parentNode,i=r.render(n,r);return o&&i!==t&&o.replaceChild(i,t),i}function c(t,e){"function"==typeof e.destroy&&h(e)&&e.destroy(t)}function l(t,e){for(var n,r,o,i=t.childNodes,s={},a=0;a<e.removes.length;a++)r=e.removes[a],n=i[r.from],r.key&&(s[r.key]=n),t.removeChild(n);for(var u=i.length,c=0;c<e.inserts.length;c++)o=e.inserts[c],n=s[o.key],t.insertBefore(n,o.to>=u++?null:i[o.to])}function f(t,e){return t&&e&&t!==e&&t.parentNode&&t.parentNode.replaceChild(e,t),e}var p=n(41),h=n(47),d=n(53),v=n(63);t.exports=r},function(t,e,n){function r(t,e){return!(!o(t)||!o(e))&&("name"in t&&"name"in e?t.id===e.id:t.init===e.init)}var o=n(47);t.exports=r},function(t,e,n){var r=n(65);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r,s,u,c,l=[];return!n&&a(e)&&(n=e,s={}),s=s||e||{},r=m(t,s),s.hasOwnProperty("key")&&(u=s.key,s.key=void 0),s.hasOwnProperty("namespace")&&(c=s.namespace,s.namespace=void 0),"INPUT"!==r||c||!s.hasOwnProperty("value")||void 0===s.value||g(s.value)||(s.value=w(s.value)),i(s),void 0!==n&&null!==n&&o(n,l,r,s),new f(r,s,l,u,c)}function o(t,e,n,r){if("string"==typeof t)e.push(new p(t));else if("number"==typeof t)e.push(new p(String(t)));else if(s(t))e.push(t);else{if(!l(t)){if(null===t||void 0===t)return;throw u({foreignObject:t,parentVnode:{tagName:n,properties:r}})}for(var i=0;i<t.length;i++)o(t[i],e,n,r)}}function i(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(g(n))continue;"ev-"===e.substr(0,3)&&(t[e]=x(n))}}function s(t){return h(t)||d(t)||v(t)||y(t)}function a(t){return"string"==typeof t||l(t)||s(t)}function u(t){var e=new Error;return e.type="virtual-hyperscript.unexpected.virtual-element",e.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+c(t.foreignObject)+".\nThe parent vnode is:\n"+c(t.parentVnode),e.foreignObject=t.foreignObject,e.parentVnode=t.parentVnode,e}function c(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}var l=n(52),f=n(66),p=n(67),h=n(44),d=n(46),v=n(47),g=n(43),y=n(49),m=n(68),w=n(70),x=n(71);t.exports=r},function(t,e,n){function r(t,e,n,r,o){this.tagName=t,this.properties=e||c,this.children=n||l,this.key=null!=r?String(r):void 0,this.namespace="string"==typeof o?o:null;var f,p=n&&n.length||0,h=0,d=!1,v=!1,g=!1;for(var y in e)if(e.hasOwnProperty(y)){var m=e[y];u(m)&&m.unhook&&(f||(f={}),f[y]=m)}for(var w=0;w<p;w++){var x=n[w];i(x)?(h+=x.count||0,!d&&x.hasWidgets&&(d=!0),!v&&x.hasThunks&&(v=!0),g||!x.hooks&&!x.descendantHooks||(g=!0)):!d&&s(x)?"function"==typeof x.destroy&&(d=!0):!v&&a(x)&&(v=!0)}this.count=p+h,this.hasWidgets=d,this.hasThunks=v,this.hooks=f,this.descendantHooks=g}var o=n(45),i=n(44),s=n(47),a=n(49),u=n(43);t.exports=r;var c={},l=[];r.prototype.version=o,r.prototype.type="VirtualNode"},function(t,e,n){function r(t){this.text=String(t)}var o=n(45);t.exports=r,r.prototype.version=o,r.prototype.type="VirtualText"},function(t,e,n){"use strict";function r(t,e){if(!t)return"DIV";var n=!e.hasOwnProperty("id"),r=o(t,i),a=null;s.test(r[1])&&(a="DIV");var u,c,l,f;for(f=0;f<r.length;f++)c=r[f],c&&(l=c.charAt(0),a?"."===l?(u=u||[],u.push(c.substring(1,c.length))):"#"===l&&n&&(e.id=c.substring(1,c.length)):a=c);return u&&(e.className&&u.push(e.className),e.className=u.join(" ")),e.namespace?a:a.toUpperCase()}var o=n(69),i=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,s=/^\.|#/;t.exports=r},function(t,e){/*!
	 * Cross-Browser Split 1.1.1
	 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
	 * Available under the MIT License
	 * ECMAScript compliant, uniform cross-browser split method
	 */
t.exports=function(t){var e,n=String.prototype.split,r=/()??/.exec("")[1]===t;return e=function(e,o,i){if("[object RegExp]"!==Object.prototype.toString.call(o))return n.call(e,o,i);var s,a,u,c,l=[],f=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.extended?"x":"")+(o.sticky?"y":""),p=0,o=new RegExp(o.source,f+"g");for(e+="",r||(s=new RegExp("^"+o.source+"$(?!\\s)",f)),i=i===t?-1>>>0:i>>>0;(a=o.exec(e))&&(u=a.index+a[0].length,!(u>p&&(l.push(e.slice(p,a.index)),!r&&a.length>1&&a[0].replace(s,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(a[e]=t)}),a.length>1&&a.index<e.length&&Array.prototype.push.apply(l,a.slice(1)),c=a[0].length,p=u,l.length>=i)));)o.lastIndex===a.index&&o.lastIndex++;return p===e.length?!c&&o.test("")||l.push(""):l.push(e.slice(p)),l.length>i?l.slice(0,i):l}}()},function(t,e){"use strict";function n(t){return this instanceof n?void(this.value=t):new n(t)}t.exports=n,n.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},function(t,e,n){"use strict";function r(t){return this instanceof r?void(this.value=t):new r(t)}var o=n(72);t.exports=r,r.prototype.hook=function(t,e){var n=o(t),r=e.substr(3);n[r]=this.value},r.prototype.unhook=function(t,e){var n=o(t),r=e.substr(3);n[r]=void 0}},function(t,e,n){"use strict";function r(t){var e=t[s];return e||(e=t[s]={}),e}var o=n(73),i="7";o("ev-store",i);var s="__EV_STORE_KEY@"+i;t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r="__INDIVIDUAL_ONE_VERSION_"+t,i=r+"_ENFORCE_SINGLETON",s=o(i,e);if(s!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+s+" installed.\nThis means you cannot install version "+e);return o(r,n)}var o=n(74);t.exports=r},function(t,e){(function(e){"use strict";function n(t,e){return t in r?r[t]:(r[t]=e,e)}var r="undefined"!=typeof window?window:"undefined"!=typeof e?e:{};t.exports=n}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){var e=t.errorMessage,n=t.id,r=t.name,s=t.type||"text",a="undefined"!=typeof t.value?t.value:"",u="coins-logon-widget-form-group",c=r.charAt(0).toUpperCase()+r.substr(1),l={className:"coins-logon-widget-input",id:n,name:r,placeholder:c,type:s,value:a},f=[new o("label",{className:"coins-logon-widget-label coins-logon-widget-visuallyhidden",for:n},[new i(c)])];return e&&(f.push(new o("span",{"aria-hidden":"true",className:"coins-logon-widget-icon"}),new o("span",{className:"coins-logon-widget-input-message"},[new i(e)])),u+=" coins-logon-widget-form-group-error",l.onkeypress=function(e){t.onKeyPress(e)}),f.splice(1,0,new o("input",l)),new o("div",{className:u},f)}var o=n(58).VNode,i=n(58).VText;t.exports=r},function(t,e,n){"use strict";function r(){var t="http://www.w3.org/2000/svg";return new o("div",{className:"coins-logon-widget-indicator"},[new o("svg",void 0,[new o("title",void 0,[new i("Loading…")],void 0,t),new o("circle",{attributes:{cx:"20",cy:"20",fill:"none",r:"8","stroke-width":"2","stroke-miterlimit":"4"}},void 0,void 0,t)],void 0,t)])}var o=n(58).VNode,i=n(58).VText;t.exports=r},function(t,e,n){"use strict";function r(t){var e,n={className:["coins-logon-widget-notification","coins-logon-widget-notification-error"].join(" ")},r=t.text;return Array.isArray(r)?e=r:"string"==typeof r&&(r.indexOf("<")!==-1&&r.indexOf(">")!==-1?n.innerHTML=r:e=[new i(r)]),new o("div",n,e)}var o=n(58).VNode,i=n(58).VText;t.exports=r},function(t,e,n){"use strict";function r(t){var e="coins-logon-widget-status",n=t.username,r=n?[new i("Logged in as "),new o("strong",void 0,[new i(n)]),new i(".")]:[new i("Logged in.")];return new o("p",{className:e},r)}var o=n(58).VNode,i=n(58).VText;t.exports=r},function(t,e){"use strict";t.exports={accountExpired:"Your account has expired.",accountWillExpire:function(t){return"Your account will expire in "+t+"."},passwordExpired:"Your password has expired.",passwordWillExpire:function(t){return"Your password will expire in "+t+"."}}},function(t,e,n){function r(t){var e=++i;return o(t)+e}var o=n(81),i=0;t.exports=r},function(t,e){function n(t){return null==t?"":t+""}t.exports=n},function(t,e){"use strict";function n(t){if(!t)throw new TypeError("Element required");if(!(t instanceof Node))throw new TypeError("Expected element to be a DOM node");return t}function r(t,e){if(!t||"string"!=typeof t)throw new TypeError(["expected string",e?" ("+e+")":"",", received: ",t.toString()].join(""));return t}function o(t,e){return t instanceof Function?t.apply(null,e):t}function i(t){return t<1?"less than 1 day":""+Math.ceil(t)+" days"}t.exports={assertElement:n,assertString:r,callOrReturn:o,formatDay:i}}])});