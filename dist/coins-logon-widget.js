!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("CoinsLogonWidget",[],e):"object"==typeof exports?exports.CoinsLogonWidget=e():t.CoinsLogonWidget=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){o.call(this);var e=this._assertElement(t.el),n=this._assertString(t.baseUrl,"baseUrl"),c=this._assertString(t.authCookieName,"authCookieName");this.options=i(s(r.DEFAULTS),t),(this.options.hiddenLabels||this.options.horizontal)&&this.options.formGroups.forEach(function(t){t.hiddenLabel=!0}),a.setOptions({authCookieName:c,baseUrl:n}),this.element=this._getElements(e),this._setState()}var o=n(1),i=n(2),s=n(26),a=n(38),c=n(41),u=(n(42),n(43));n(45);var l={INVALID:"invalid",LOGIN:"login:init",LOGIN_ERROR:"login:error",LOGIN_ACCOUNT_EXPIRED:"login:accountExpired",LOGIN_ACCOUNT_WILL_EXPIRE:"login:accountWillExpire",LOGIN_PASSWORD_EXPIRED:"login:passwordExpired",LOGIN_PASSWORD_WILL_EXPIRE:"login:passwordWillExpire",LOGIN_SUCCESS:"login:success",LOGOUT:"logout:init",LOGOUT_ERROR:"logout:error",LOGOUT_SUCCESS:"logout:success"},p=864e5;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype._assertElement=function(t){if(!t)throw new TypeError("Element required");if(!(t instanceof Node))throw new TypeError("Expected element to be a DOM node");return t},r.prototype._assertString=function(t,e){if(!t||"string"!=typeof t)throw new TypeError(["expected string",e?" ("+e+")":"",", received: ",t.toString()].join(""));return t},r.prototype._getElements=function(t){var e=this;return this.form=new c({formGroups:this.options.formGroups.reverse(),horizontal:this.options.horizontal,login:function(){e.emit(l.LOGIN,e.form.getFormData())},logout:function(){e.emit(l.LOGOUT)}}),t.innerHTML="",t.className=this.options.classNames.root,t.appendChild(this.form.element),t},r.prototype._setState=function(){this.on(l.LOGIN,this.login),this.on(l.LOGIN_ERROR,this.onError),this.on(l.LOGIN_ACCOUNT_EXPIRED,this.onAccountExpired),this.on(l.LOGIN_ACCOUNT_WILL_EXPIRE,this.onAccountWillExpire),this.on(l.LOGIN_PASSWORD_EXPIRED,this.onPasswordExpired),this.on(l.LOGIN_PASSWORD_WILL_EXPIRE,this.onPasswordWillExpire),this.on(l.LOGIN_SUCCESS,this.onLogin),this.on(l.LOGOUT,this.logout),this.on(l.LOGOUT_ERROR,this.onError),this.on(l.LOGOUT_SUCCESS,this.onLogout)},r.prototype.destroy=function(){this.form.destroy(),delete this.form,this.removeAllListeners(),delete this.options,delete this.element},r.prototype.login=function(t){var e=this,n=e.form.validate();return n!==!0?void e.emit(l.INVALID,n):(e.form.clearMessage(),this.form.setLoading(),a.login(t.username,t.password).done(function(t){var n=Date.parse(t.user.acctExpDate),r=Date.now(),o=Date.parse(t.user.passwordExpDate);e.form.clearLoading(),10*p>n-r?e.emit(l.LOGIN_ACCOUNT_WILL_EXPIRE,t):10*p>o-r?e.emit(l.LOGIN_PASSWORD_WILL_EXPIRE,t):e.emit(l.LOGIN_SUCCESS,t)}).fail(function(t){e.form.clearLoading(),"Password expired"===t?e.emit(l.LOGIN_PASSWORD_EXPIRED,t):"Account expired"===t?e.emit(l.LOGIN_ACCOUNT_EXPIRED,t):e.emit(l.LOGIN_ERROR,t)}))},r.prototype.logout=function(){var t=this;this.form.setLoading(),a.logout().done(function(e){t.form.clearLoading(),t.emit(l.LOGOUT_SUCCESS,e)}).fail(function(e){t.form.clearLoading(),t.emit(l.LOGOUT_ERROR,e)})},r.prototype.onAccountExpired=function(t){var e=u.callOrReturn(this.options.messages.accountExpired);this.form.setErrorMessage(e)},r.prototype.onAccountWillExpire=function(t){var e=Date.parse(t.user.acctExpDate),n=Date.now(),r=u.callOrReturn(this.options.messages.accountWillExpire,[u.formatDay((e-n)/p)]);this.form.setErrorMessage(r)},r.prototype.onPasswordExpired=function(t){var e=u.callOrReturn(this.options.messages.passwordExpired);this.form.setErrorMessage(e)},r.prototype.onPasswordWillExpire=function(t){var e=Date.parse(t.user.passwordExpDate),n=Date.now(),r=u.callOrReturn(this.options.messages.passwordWillExpire,[u.formatDay((e-n)/p)]);this.form.setErrorMessage(r)},r.prototype.onError=function(t){var e;e="undefined"!=typeof t?t.message||t.toString():"Unknown error!",this.form.setErrorMessage(e),console.error(t)},r.prototype.onLogin=function(t){var e=t.username,n=e?"Logged in as <strong>"+e+"</strong>.":"Logged in.";this.form.setToLogout(n)},r.prototype.onLogout=function(t){this.form.setToLogin()},r.prototype.onSubmit=function(t){t.preventDefault();var e;this.formGroups.forEach(function(t){var n=t.validate();n||(e=!0)}),e||(this.emit("submitted",t),this.login())},r.DEFAULTS={classNames:{root:"coins-logon-widget"},formGroups:[{inputName:"username",labelText:"Username:",placeholder:""},{inputName:"password",labelText:"Password:",placeholder:"",type:"password"}],hiddenLabels:!1,horizontal:!1,messages:{accountExpired:"Your account has expired.",accountWillExpire:function(t){return"Your account will expire in "+t+"."},passwordExpired:"Your password has expired.",passwordWillExpire:function(t){return"Your password will expire in "+t+"."}}},t.exports=r},function(t,e,n){var r;(function(){"use strict";function e(){}function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var s=e.prototype,a=this,c=a.EventEmitter;s.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp){e={};for(n in r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n])}else e=r[t]||(r[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},s.addListener=function(t,e){var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},s.on=i("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=i("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&(n=o(i[r],e),-1!==n&&i[r].splice(n,1));return this},s.off=i("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var r,o,i=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)i.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(o=e[r])&&("function"==typeof o?i.call(this,r,o):s.call(this,r,o));return this},s.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},s.removeAllListeners=i("removeEvent"),s.emitEvent=function(t,e){var n,r,o,i,s,a=this.getListenersAsObject(t);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=n.length;o--;)r=n[o],r.once===!0&&this.removeListener(t,r.listener),s=r.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},s.trigger=i("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},s._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return a.EventEmitter=c,e},r=function(){return e}.call(a,n,a,t),!(void 0!==r&&(t.exports=r))}).call(this)},function(t,e,n){var r=n(3),o=n(19),i=n(21),s=i(function(t,e,n){return n?r(t,e,n):o(t,e)});t.exports=s},function(t,e,n){function r(t,e,n){for(var r=-1,i=o(e),s=i.length;++r<s;){var a=i[r],c=t[a],u=n(c,e[a],a,t,e);(u===u?u===c:c!==c)&&(void 0!==c||a in t)||(t[a]=u)}return t}var o=n(4);t.exports=r},function(t,e,n){var r=n(5),o=n(10),i=n(8),s=n(14),a=r(Object,"keys"),c=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?s(t):i(t)?a(t):[]}:s;t.exports=c},function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return o(n)?n:void 0}var o=n(6);t.exports=r},function(t,e,n){function r(t){return null==t?!1:o(t)?l.test(c.call(t)):i(t)&&s.test(t)}var o=n(7),i=n(9),s=/^\[object .+?Constructor\]$/,a=Object.prototype,c=Function.prototype.toString,u=a.hasOwnProperty,l=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){return o(t)&&a.call(t)==i}var o=n(8),i="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){function r(t){return null!=t&&i(o(t))}var o=n(11),i=n(13);t.exports=r},function(t,e,n){var r=n(12),o=r("length");t.exports=o},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;t.exports=n},function(t,e,n){function r(t){for(var e=c(t),n=e.length,r=n&&t.length,u=!!r&&a(r)&&(i(t)||o(t)),p=-1,f=[];++p<n;){var h=e[p];(u&&s(h,r)||l.call(t,h))&&f.push(h)}return f}var o=n(15),i=n(16),s=n(17),a=n(13),c=n(18),u=Object.prototype,l=u.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){return i(t)&&o(t)&&a.call(t,"callee")&&!c.call(t,"callee")}var o=n(10),i=n(9),s=Object.prototype,a=s.hasOwnProperty,c=s.propertyIsEnumerable;t.exports=r},function(t,e,n){var r=n(5),o=n(13),i=n(9),s="[object Array]",a=Object.prototype,c=a.toString,u=r(Array,"isArray"),l=u||function(t){return i(t)&&o(t.length)&&c.call(t)==s};t.exports=l},function(t,e){function n(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var r=/^\d+$/,o=9007199254740991;t.exports=n},function(t,e,n){function r(t){if(null==t)return[];c(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(i(t)||o(t))&&e||0;for(var n=t.constructor,r=-1,u="function"==typeof n&&n.prototype===t,p=Array(e),f=e>0;++r<e;)p[r]=r+"";for(var h in t)f&&s(h,e)||"constructor"==h&&(u||!l.call(t,h))||p.push(h);return p}var o=n(15),i=n(16),s=n(17),a=n(13),c=n(8),u=Object.prototype,l=u.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(20),i=n(4);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,c=s>2?n[2]:void 0,u=s>1?n[s-1]:void 0;for("function"==typeof a?(a=o(a,u,5),s-=2):(a="function"==typeof u?u:void 0,s-=a?1:0),c&&i(n[0],n[1],c)&&(a=3>s?void 0:a,s=1);++r<s;){var l=n[r];l&&t(e,l,a)}return e})}var o=n(22),i=n(24),s=n(25);t.exports=r},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return o;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}var o=n(23);t.exports=r},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;if("number"==r?o(n)&&i(e,n.length):"string"==r&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}var o=n(10),i=n(17),s=n(8);t.exports=r},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=s,t.apply(this,a)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){function r(t,e,n){return"function"==typeof e?o(t,!0,i(e,n,3)):o(t,!0)}var o=n(27),i=n(22);t.exports=r},function(t,e,n){function r(t,e,n,d,m,g,y){var x;if(n&&(x=m?n(t,d,m):n(t)),void 0!==x)return x;if(!f(t))return t;var _=p(t);if(_){if(x=c(t),!e)return o(t,x)}else{var b=k.call(t),E=b==v;if(b!=w&&b!=h&&(!E||m))return G[b]?u(t,b,e):m?t:{};if(x=l(E?{}:t),!e)return s(x,t)}g||(g=[]),y||(y=[]);for(var L=g.length;L--;)if(g[L]==t)return y[L];return g.push(t),y.push(x),(_?i:a)(t,function(o,i){x[i]=r(o,e,n,i,t,g,y)}),x}var o=n(28),i=n(29),s=n(19),a=n(30),c=n(34),u=n(35),l=n(37),p=n(16),f=n(8),h="[object Arguments]",d="[object Array]",m="[object Boolean]",g="[object Date]",y="[object Error]",v="[object Function]",x="[object Map]",_="[object Number]",w="[object Object]",b="[object RegExp]",E="[object Set]",L="[object String]",O="[object WeakMap]",S="[object ArrayBuffer]",N="[object Float32Array]",j="[object Float64Array]",A="[object Int8Array]",C="[object Int16Array]",I="[object Int32Array]",R="[object Uint8Array]",T="[object Uint8ClampedArray]",U="[object Uint16Array]",D="[object Uint32Array]",G={};G[h]=G[d]=G[S]=G[m]=G[g]=G[N]=G[j]=G[A]=G[C]=G[I]=G[_]=G[w]=G[b]=G[L]=G[R]=G[T]=G[U]=G[D]=!0,G[y]=G[v]=G[x]=G[E]=G[O]=!1;var P=Object.prototype,k=P.toString;t.exports=r},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function r(t,e){return o(t,e,i)}var o=n(31),i=n(4);t.exports=r},function(t,e,n){var r=n(32),o=r();t.exports=o},function(t,e,n){function r(t){return function(e,n,r){for(var i=o(e),s=r(e),a=s.length,c=t?a:-1;t?c--:++c<a;){var u=s[c];if(n(i[u],u,i)===!1)break}return e}}var o=n(33);t.exports=r},function(t,e,n){function r(t){return o(t)?t:Object(t)}var o=n(8);t.exports=r},function(t,e){function n(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var r=Object.prototype,o=r.hasOwnProperty;t.exports=n},function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case l:return o(t);case i:case s:return new r(+t);case p:case f:case h:case d:case m:case g:case y:case v:case x:var w=t.buffer;return new r(n?o(w):w,t.byteOffset,t.length);case a:case u:return new r(t);case c:var b=new r(t.source,_.exec(t));b.lastIndex=t.lastIndex}return b}var o=n(36),i="[object Boolean]",s="[object Date]",a="[object Number]",c="[object RegExp]",u="[object String]",l="[object ArrayBuffer]",p="[object Float32Array]",f="[object Float64Array]",h="[object Int8Array]",d="[object Int16Array]",m="[object Int32Array]",g="[object Uint8Array]",y="[object Uint8ClampedArray]",v="[object Uint16Array]",x="[object Uint32Array]",_=/\w*$/;t.exports=r},function(t,e){(function(e){function n(t){var e=new r(t.byteLength),n=new o(e);return n.set(new o(t)),e}var r=e.ArrayBuffer,o=e.Uint8Array;t.exports=n}).call(e,function(){return this}())},function(t,e){function n(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}t.exports=n},function(t,e,n){"use strict";function r(){return JSON.parse(localStorage.getItem(v))}function o(t){return localStorage.setItem(v,JSON.stringify(t)),r()}function i(t,e,n){var r=y.client.header(t,e,{credentials:n});return{Authorization:r.field}}function s(t){var e=c();return e.baseUrl+t}function a(){var t=c().authCookieName,e=location.hostname.split("."),n={path:"/"};return e.length>2?n.domain="."+e.slice(-2).join("."):n.domain=e.join("."),n?(g.remove(t,n),g.remove(t)):g.remove(t),o({date:Date.now(),status:"logged out"}),[].slice.call(arguments)}function c(){return x}function u(t){return m(x,t),c()}function l(t){return t.data[0]}function p(t){var e,n=t.statusText;return t.responseText&&(e=JSON.parse(t.responseText)||{},e=(e.error||{}).message||""),e||n||"Unknown error"}function f(t,e){var n=jQuery.Deferred();return jQuery.ajax({data:{password:btoa(e),username:btoa(t)},dataType:"json",type:"POST",url:s("/auth/keys"),xhrFields:{withCredentials:!0}}).done(function(t){var e=l(t);o(e),n.resolve(e)}).fail(function(t){n.reject(p(t))}),n.promise()}function h(){var t=r(),e="DELETE",n=s("/auth/keys/"+t.id);return jQuery.ajax({dataType:"json",headers:i(n,e,t),type:e,url:n,xhrFields:{withCredentials:!0}}).then(l,p).then(a,a)}function d(){var t,e,n=g.get(c().authCookieName),o=r();return n&&o&&(!(o instanceof Object)||"id"in o&&"key"in o)?(t="GET",e=s("/auth/cookies/"+n),jQuery.ajax({dataType:"json",type:t,url:e,xhrFields:{withCredentials:!0}}).then(function(t){return"error"in t&&!t.error},function(){return!1})):jQuery.Deferred().resolve(!1)}var m=n(2),g=n(39),y=n(40),v="COINS_AUTH_CREDENTIALS",x={authCookieName:"",baseUrl:""};-1!==document.cookie.split("; ").indexOf("REMOVED")&&(document.cookie="=REMOVED;path=/;domain=.mrn.org;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),t.exports={getOptions:c,setOptions:u,login:f,logout:h,isLoggedIn:d}},function(t,e,n){var r,o;/*!
	 * JavaScript Cookie v2.0.4
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */
!function(i){r=i,o="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==o&&(t.exports=o))}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(n){function r(e,o,i){var s;if(arguments.length>1){if(i=t({path:"/"},r.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(c){}return o=encodeURIComponent(String(o)),o=o.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}e||(s={});for(var u=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,p=0;p<u.length;p++){var f=u[p].split("="),h=f[0].replace(l,decodeURIComponent),d=f.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{if(d=n&&n(d,h)||d.replace(l,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(c){}if(e===h){s=d;break}e||(s[h]=d)}catch(c){}}return s}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(e,n){r(e,"",t(n,{expires:-1}))},r.withConverter=e,r}return e()})},function(t,e){var n={internals:{}};n.client={header:function(t,e,r){var o={field:"",artifacts:{}};if(!t||"string"!=typeof t&&"object"!=typeof t||!e||"string"!=typeof e||!r||"object"!=typeof r)return o.err="Invalid argument type",o;var i=r.timestamp||n.utils.now(r.localtimeOffsetMsec),s=r.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return o.err="Invalid credentials object",o;if(-1===n.crypto.algorithms.indexOf(s.algorithm))return o.err="Unknown algorithm",o;"string"==typeof t&&(t=n.utils.parseUri(t));var a={ts:i,nonce:r.nonce||n.utils.randomString(6),method:e,resource:t.resource,host:t.host,port:t.port,hash:r.hash,ext:r.ext,app:r.app,dlg:r.dlg};o.artifacts=a,a.hash||!r.payload&&""!==r.payload||(a.hash=n.crypto.calculatePayloadHash(r.payload,s.algorithm,r.contentType));var c=n.crypto.calculateMac("header",s,a),u=null!==a.ext&&void 0!==a.ext&&""!==a.ext,l='Hawk id="'+s.id+'", ts="'+a.ts+'", nonce="'+a.nonce+(a.hash?'", hash="'+a.hash:"")+(u?'", ext="'+n.utils.escapeHeaderAttribute(a.ext):"")+'", mac="'+c+'"';return a.app&&(l+=', app="'+a.app+(a.dlg?'", dlg="'+a.dlg:"")+'"'),o.field=l,o},bewit:function(t,e){if(!t||"string"!=typeof t||!e||"object"!=typeof e||!e.ttlSec)return"";e.ext=null===e.ext||void 0===e.ext?"":e.ext;var r=n.utils.now(e.localtimeOffsetMsec),o=e.credentials;if(!(o&&o.id&&o.key&&o.algorithm))return"";if(-1===n.crypto.algorithms.indexOf(o.algorithm))return"";t=n.utils.parseUri(t);var i=r+e.ttlSec,s=n.crypto.calculateMac("bewit",o,{ts:i,nonce:"",method:"GET",resource:t.resource,host:t.host,port:t.port,ext:e.ext}),a=o.id+"\\"+i+"\\"+s+"\\"+e.ext;return n.utils.base64urlEncode(a)},authenticate:function(t,e,r,o){o=o||{};var i=function(e){return t.getResponseHeader?t.getResponseHeader(e):t.getHeader(e)},s=i("www-authenticate");if(s){var a=n.utils.parseAuthorizationHeader(s,["ts","tsm","error"]);if(!a)return!1;if(a.ts){var c=n.crypto.calculateTsMac(a.ts,e);if(c!==a.tsm)return!1;n.utils.setNtpOffset(a.ts-Math.floor((new Date).getTime()/1e3))}}var u=i("server-authorization");if(!u&&!o.required)return!0;var l=n.utils.parseAuthorizationHeader(u,["mac","ext","hash"]);if(!l)return!1;var p={ts:r.ts,nonce:r.nonce,method:r.method,resource:r.resource,host:r.host,port:r.port,hash:l.hash,ext:l.ext,app:r.app,dlg:r.dlg},f=n.crypto.calculateMac("response",e,p);if(f!==l.mac)return!1;if(!o.payload&&""!==o.payload)return!0;if(!l.hash)return!1;var h=n.crypto.calculatePayloadHash(o.payload,e.algorithm,i("content-type"));return h===l.hash},message:function(t,e,r,o){if(!t||"string"!=typeof t||!e||"number"!=typeof e||null===r||void 0===r||"string"!=typeof r||!o||"object"!=typeof o)return null;var i=o.timestamp||n.utils.now(o.localtimeOffsetMsec),s=o.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return null;if(-1===n.crypto.algorithms.indexOf(s.algorithm))return null;var a={ts:i,nonce:o.nonce||n.utils.randomString(6),host:t,port:e,hash:n.crypto.calculatePayloadHash(r,s.algorithm)},c={id:s.id,ts:a.ts,nonce:a.nonce,hash:a.hash,mac:n.crypto.calculateMac("message",s,a)};return c},authenticateTimestamp:function(t,e,r){var o=n.crypto.calculateTsMac(t.ts,e);return o!==t.tsm?!1:(r!==!1&&n.utils.setNtpOffset(t.ts-Math.floor((new Date).getTime()/1e3)),!0)}},n.crypto={headerVersion:"1",algorithms:["sha1","sha256"],calculateMac:function(t,e,o){var i=n.crypto.generateNormalizedString(t,o),s=r["Hmac"+e.algorithm.toUpperCase()](i,e.key);return s.toString(r.enc.Base64)},generateNormalizedString:function(t,e){var r="hawk."+n.crypto.headerVersion+"."+t+"\n"+e.ts+"\n"+e.nonce+"\n"+(e.method||"").toUpperCase()+"\n"+(e.resource||"")+"\n"+e.host.toLowerCase()+"\n"+e.port+"\n"+(e.hash||"")+"\n";return e.ext&&(r+=e.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",e.app&&(r+=e.app+"\n"+(e.dlg||"")+"\n"),r},calculatePayloadHash:function(t,e,o){var i=r.algo[e.toUpperCase()].create();return i.update("hawk."+n.crypto.headerVersion+".payload\n"),i.update(n.utils.parseContentType(o)+"\n"),i.update(t),i.update("\n"),i.finalize().toString(r.enc.Base64)},calculateTsMac:function(t,e){var o=r["Hmac"+e.algorithm.toUpperCase()]("hawk."+n.crypto.headerVersion+".ts\n"+t+"\n",e.key);return o.toString(r.enc.Base64)}},n.internals.LocalStorage=function(){this._cache={},this.length=0,this.getItem=function(t){return this._cache.hasOwnProperty(t)?String(this._cache[t]):null},this.setItem=function(t,e){this._cache[t]=String(e),this.length=Object.keys(this._cache).length},this.removeItem=function(t){delete this._cache[t],this.length=Object.keys(this._cache).length},this.clear=function(){this._cache={},this.length=0},this.key=function(t){return Object.keys(this._cache)[t||0]}},n.utils={storage:new n.internals.LocalStorage,setStorage:function(t){var e=n.utils.storage.getItem("hawk_ntp_offset");n.utils.storage=t,e&&n.utils.setNtpOffset(e)},setNtpOffset:function(t){try{n.utils.storage.setItem("hawk_ntp_offset",t)}catch(e){console.error("[hawk] could not write to storage."),console.error(e)}},getNtpOffset:function(){var t=n.utils.storage.getItem("hawk_ntp_offset");return t?parseInt(t,10):0},now:function(t){return Math.floor(((new Date).getTime()+(t||0))/1e3)+n.utils.getNtpOffset()},escapeHeaderAttribute:function(t){return t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},parseContentType:function(t){return t?t.split(";")[0].replace(/^\s+|\s+$/g,"").toLowerCase():""},parseAuthorizationHeader:function(t,e){if(!t)return null;var n=t.match(/^(\w+)(?:\s+(.*))?$/);if(!n)return null;var r=n[1];if("hawk"!==r.toLowerCase())return null;var o=n[2];if(!o)return null;var i={},s=o.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(t,n,r){return-1===e.indexOf(n)||null===r.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)||i.hasOwnProperty(n)?void 0:(i[n]=r,"")});return""!==s?null:i},randomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=e.length,r=[],o=0;t>o;++o)r[o]=e[Math.floor(Math.random()*n)];return r.join("")},uriRegex:/^([^:]+)\:\/\/(?:[^@]*@)?([^\/:]+)(?:\:(\d+))?([^#]*)(?:#.*)?$/,parseUri:function(t){var e=t.match(n.utils.uriRegex);if(!e)return{host:"",port:"",resource:""};var r=e[1].toLowerCase(),o={host:e[2],port:e[3]||("http"===r?"80":"https"===r?"443":""),resource:e[4]};return o},base64urlEncode:function(t){var e=r.enc.Utf8.parse(t),n=r.enc.Base64.stringify(e);return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}};var r=r||function(t,e){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var o=0;t>o;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;t>o;o+=4)e[r+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;e>r;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},c=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++){var o=e[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new s.init(n,e/2)}},u=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},p=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=o/(4*i),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*i,o=t.min(4*e,o),e){for(var c=0;e>c;c+=i)this._doProcessBlock(r,c);c=r.splice(0,e),n.sigBytes-=o}return new s.init(c,o)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=p.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);!function(){var t=r,e=t.lib,n=e.WordArray,o=e.Hasher,i=[],e=t.algo.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],s=n[2],a=n[3],c=n[4],u=0;80>u;u++){if(16>u)i[u]=0|t[e+u];else{var l=i[u-3]^i[u-8]^i[u-14]^i[u-16];i[u]=l<<1|l>>>31}l=(r<<5|r>>>27)+c+i[u],l=20>u?l+((o&s|~o&a)+1518500249):40>u?l+((o^s^a)+1859775393):60>u?l+((o&s|o&a|s&a)-1894007588):l+((o^s^a)-899497514),c=a,a=s,s=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(r+64>>>9<<4)+15]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=o._createHelper(e),t.HmacSHA1=o._createHmacHelper(e)}(),function(t){for(var e=r,n=e.lib,o=n.WordArray,i=n.Hasher,n=e.algo,s=[],a=[],c=function(t){return 4294967296*(t-(0|t))|0},u=2,l=0;64>l;){var p;t:{p=u;for(var f=t.sqrt(p),h=2;f>=h;h++)if(!(p%h)){p=!1;break t}p=!0}p&&(8>l&&(s[l]=c(t.pow(u,.5))),a[l]=c(t.pow(u,1/3)),l++),u++}var d=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],c=n[4],u=n[5],l=n[6],p=n[7],f=0;64>f;f++){if(16>f)d[f]=0|t[e+f];else{var h=d[f-15],m=d[f-2];d[f]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+d[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+d[f-16]}h=p+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+a[f]+d[f],m=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),p=l,l=u,u=c,c=s+h|0,s=i,i=o,o=r,r=h+m|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+p|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=r,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,o=4*r;n.sigBytes>o&&(n=t.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),a=i.words,c=s.words,u=0;r>u;u++)a[u]^=1549556828,c[u]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=r,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var o=0;n>o;o+=3)for(var i=(e[o>>>2]>>>24-8*(o%4)&255)<<16|(e[o+1>>>2]>>>24-8*((o+1)%4)&255)<<8|e[o+2>>>2]>>>24-8*((o+2)%4)&255,s=0;4>s&&n>o+.75*s;s++)t.push(r.charAt(i>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,o=r.charAt(64);o&&(o=t.indexOf(o),-1!=o&&(n=o));for(var o=[],i=0,s=0;n>s;s++)if(s%4){var a=r.indexOf(t.charAt(s-1))<<2*(s%4),c=r.indexOf(t.charAt(s))>>>6-2*(s%4);o[i>>>2]|=(a|c)<<24-8*(i%4),i++}return e.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.crypto.internals=r,"undefined"!=typeof t&&t.exports&&(t.exports=n)},function(t,e,n){"use strict";function r(t){t=t||{},this.options=o(i(r.DEFAULTS),t),this.element=this._getElements(),this._setState(this.options.initialState)}var o=n(2),i=n(26),s=n(42),a=n(43);r.prototype._getElements=function(){var t=document.createElement("button"),e=document.createElement("form");return e.className=this.options.classNames.form,this.options.horizontal&&e.classList.add(this.options.classNames.horizontal),e.method="post",e.addEventListener("submit",this._submitHandler.bind(this),!1),t.className=this.options.classNames.button+" "+this.options.classNames.right,t.type="submit",e.appendChild(this._getIndicatorElements()),e.appendChild(t),e},r.prototype._getIndicatorElements=function(){var t=document.createElement("div"),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","title"),r=document.createElementNS("http://www.w3.org/2000/svg","circle"),o={cx:20,cy:20,r:8,fill:"none","stroke-width":2,"stroke-miterlimit":4};t.className=this.options.classNames.indicator,t.setAttribute("aria-hidden",!0),n.textContent="Loading…";for(var i in o)o.hasOwnProperty(i)&&r.setAttribute(i,o[i]);return e.appendChild(n),e.appendChild(r),t.appendChild(e),t},r.prototype._setState=function(t){"undefined"==typeof this._state&&(this._state={});var e=this,n=this.element.querySelector("."+this.options.classNames.button),r=this.element.querySelector("."+this.options.classNames.indicator),i=this.element.querySelector("."+this.options.classNames.notification),s=this.element.querySelector("."+this.options.classNames.status);o(this._state,t),i&&!t.notification?a.removeElement(i):!i&&t.notification&&(i=document.createElement("div"),i.className=this.options.classNames.notification,i.setAttribute("role","alert"),this.element.insertBefore(i,this.element.firstChild)),i&&t.notification&&(t.notification instanceof Node?i.appendChild(t.notification):i.innerHTML=t.notification,i.classList.remove(this.options.classNames.notificationError),i.classList.remove(this.options.classNames.notificationSuccess),t.error?i.classList.add(this.options.classNames.notificationError):t.success&&i.classList.add(this.options.classNames.notificationSuccess)),this._state.loading?(this.element.classList.add(this.options.classNames.loading),r.setAttribute("aria-hidden",!1)):(this.element.classList.remove(this.options.classNames.loading),r.setAttribute("aria-hidden",!0)),this._state.login?(this.formGroups||(this._setFormGroups(),this.formGroups.map(function(t){return t.element}).reverse().forEach(function(t){e.element.insertBefore(t,r)})),s&&this.element.removeChild(s),n.textContent=this.options.buttonLoginText,n.classList.remove(this.options.classNames.buttonSecondary),n.classList.add(this.options.classNames.buttonPrimary)):(this.formGroups&&this._removeFormGroups(),s||(s=document.createElement("p"),s.className=this.options.classNames.status,this.element.insertBefore(s,this.element.firstChild)),s.innerHTML=this._state.status||this.options.statusText,n.textContent=this.options.buttonLogoutText,n.classList.remove(this.options.classNames.buttonPrimary),n.classList.add(this.options.classNames.buttonSecondary))},r.prototype._submitHandler=function(t){t.preventDefault();var e=this.options.login,n=this.options.logout;this._state.login&&e instanceof Function?e(t):n instanceof Function&&n(t)},r.prototype._setFormGroups=function(){this.formGroups=this.options.formGroups.map(function(t){return new s(t)})},r.prototype._removeFormGroups=function(){this.formGroups.forEach(function(t){t.destroy()}),delete this.formGroups},r.prototype.clearMessage=function(){this._setState({error:null,notification:null,success:null})},r.prototype.destroy=function(){this.element.removeEventListener("submit",this._submitHandler,!1),this._removeFormGroups(),a.removeElement(this.element),delete this._state,delete this.options},r.prototype.getFormData=function(){return this.formGroups.reduce(function(t,e){var n=e.getName();return n in t||(t[n]=e.getValue()),t},{})},r.prototype.setErrorMessage=function(t){this._setState({error:!0,notification:t})},r.prototype.setLoading=function(){this._setState({loading:!0})},r.prototype.clearLoading=function(){this._setState({loading:!1})},r.prototype.setSuccessMessage=function(t){this._setState({notification:t,success:!0})},r.prototype.setToLogin=function(t){this._setState({login:!0})},r.prototype.setToLogout=function(t){this._setState({login:!1,status:t||null})},r.prototype.validate=function(){var t,e;return this.formGroups?(e=this.formGroups.map(function(t){return t.validate()}),t=e.every(function(t){return t===!0}),t?!0:e):void 0},r.DEFAULTS={buttonLoginText:"Log In",buttonLogoutText:"Log Out",classNames:{button:"coins-logon-widget-button",buttonPrimary:"coins-logon-widget-button-primary",buttonSecondary:"coins-logon-widget-button-secondary",form:"coins-logon-widget-form",horizontal:"coins-logon-widget-form-horizontal",indicator:"coins-logon-widget-indicator",loading:"coins-logon-widget-form-loading",notification:"coins-logon-widget-notification",notificationError:"coins-logon-widget-notification-error",notificationSuccess:"coins-logon-widget-notification-success",right:"coins-logon-widget-right",status:"coins-logon-widget-status"},initialState:{error:null,login:!0,notification:null,success:null},statusText:"Logged in"},t.exports=r},function(t,e,n){"use strict";function r(t){t=t||{},this.options=o(i(r.DEFAULTS),t),this.element=this._getElements(),this._setState()}var o=n(2),i=n(26),s=n(43);r.prototype._getElements=function(){var t=this.options.classNames,e=document.createElement("div"),n=s.uniqueId("coins-logon-widget-"),r=document.createElement("input"),o=document.createElement("label");return e.className=t.formGroup,o.className=t.label,o.setAttribute("for",n),o.textContent=this.options.labelText,r.className=t.input,r.id=n,r.name=this.options.inputName,r.type=this.options.type,this.options.hiddenLabel?(o.classList.add(t.hidden),r.placeholder=this.options.placeholder||this.options.labelText):(this.options.placeholder&&(r.placeholder=this.options.placeholder),this.options.required&&r.setAttribute("aria-required",!0)),e.appendChild(o),e.appendChild(r),e},r.prototype._setState=function(t){"undefined"==typeof this._state&&(this._state={});var e=this,n=this.element,r=this.options.classNames,i=n.querySelector("."+r.input),a=n.querySelector("."+r.icon),c=n.querySelector("."+r.message);o(this._state,t),this._state.message||this._state.error||this._state.success?(a||(a=document.createElement("span"),a.className=this.options.classNames.icon,a.setAttribute("aria-hidden",!0),n.appendChild(a)),!c&&this._state.message?(c=document.createElement("span"),c.className=this.options.classNames.message,n.appendChild(c)):this._state.message||c.parentNode.removeChild(c),c&&this._state.message&&(c.textContent=this._state.message),this._state.error?(n.classList.remove(r.success),n.classList.add(r.error)):this._state.success&&(n.classList.remove(r.error),n.classList.add(r.success)),s.once(i,"keydown",function(){e._setState({error:null,message:null,success:null})})):(a&&a.parentNode.removeChild(a),c&&c.parentNode.removeChild(c),n.classList.remove(r.error),n.classList.remove(r.success))},r.prototype.destroy=function(){s.removeElement(this.element),delete this._state,delete this.options},r.prototype.getName=function(){return this.options.inputName},r.prototype.getValue=function(){return this.element.querySelector("input").value},r.prototype.validate=function(){var t,e=this.getValue(),n=this.options.validate;return this.options.required&&n instanceof Function&&(t=n(e),t!==!0)?(this._setState({error:!0,message:t}),!1):!0},r.DEFAULTS={classNames:{error:"coins-logon-widget-form-group-error",formGroup:"coins-logon-widget-form-group",hidden:"coins-logon-widget-visuallyhidden",icon:"coins-logon-widget-icon",input:"coins-logon-widget-input",label:"coins-logon-widget-label",message:"coins-logon-widget-input-message",success:"coins-logon-widget-form-group-success"},hiddenLabel:!1,inputName:"name",labelText:"Name:",placeholder:"",required:!0,type:"text",validate:function(t){return""===t.trim()?"Field empty!":!0}},t.exports=r},function(t,e,n){"use strict";function r(t,e){return t instanceof Function?t.apply(null,e):t}function o(t){return 1>t?"less than 1 day":""+Math.ceil(t)+" days"}function i(t,e,n){function r(){n.apply(null,arguments),t.removeEventListener(e,r,!1)}t.addEventListener(e,r,!1)}function s(t){if(t)for(;t.lastChild;)t.removeChild(t.lastChild);t.parentNode&&t.parentNode.removeChild(t)}function a(t){return"string"!=typeof t&&(t=""),t+u.generate()}var c=n(44),u=new c;t.exports={callOrReturn:r,formatDay:o,once:i,removeElement:s,uniqueId:a}},function(t,e,n){var r,o;!function(){"use strict";function n(t){return this instanceof n==!1?new n(t):(this.useDate=t===!0,void this.reset())}n.prototype.generate=function(){var t;return this.useDate===!1?this.previous++:(t=Date.now(),t<=this.previous?t=++this.previous:this.previous=t,t)},n.prototype.reset=function(){this.previous=0},"object"==typeof t&&"object"==typeof t.exports?t.exports=n:(r=[],o=function(){return n}.apply(e,r),!(void 0!==o&&(t.exports=o)))}()},function(t,e,n){t.exports=function(){Function.prototype.bind||(Function.prototype.bind=n(46))}()},function(t,e){var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,o=Object.prototype.toString,i="[object Function]";t.exports=function(t){var e=this;if("function"!=typeof e||o.call(e)!==i)throw new TypeError(n+e);for(var s=r.call(arguments,1),a=function(){if(this instanceof p){var n=e.apply(this,s.concat(r.call(arguments)));return Object(n)===n?n:this}return e.apply(t,s.concat(r.call(arguments)))},c=Math.max(0,e.length-s.length),u=[],l=0;c>l;l++)u.push("$"+l);var p=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(a);if(e.prototype){var f=function(){};f.prototype=e.prototype,p.prototype=new f,f.prototype=null}return p}}])});