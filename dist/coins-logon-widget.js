!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("CoinsLogonWidget",[],e):"object"==typeof exports?exports.CoinsLogonWidget=e():t.CoinsLogonWidget=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){u.call(this,t);var e=r.EVENTS,n=this;this.element=d.assertElement(t.el),this._state={isLoggedIn:!1,onSubmit:i(this.login,this),passwordProps:{id:h("coins-logon-widget-"),name:"password",type:"password"},usernameProps:{id:h("coins-logon-widget-"),name:"username"}},this._options={},this._options.messages=t.messages?l({},f,t.messages):f,this._options.checkAuth="boolean"==typeof t.checkAuth?t.checkAuth:!1,this._options.redirect="boolean"==typeof t.redirect?t.redirect:!1,this._options.redirectUrl="string"==typeof t.redirectUrl?t.redirectUrl:void 0,o.setOptions({authCookieName:d.assertString(t.authCookieName,"authCookieName"),baseUrl:d.assertString(t.baseUrl,"baseUrl")}),this.on(e.LOGIN,this.login),this.on(e.LOGIN_ERROR,this.onError),this.on(e.LOGIN_ACCOUNT_EXPIRED,this.onAccountExpired),this.on(e.LOGIN_ACCOUNT_WILL_EXPIRE,this.onAccountWillExpire),this.on(e.LOGIN_PASSWORD_EXPIRED,this.onPasswordExpired),this.on(e.LOGIN_PASSWORD_WILL_EXPIRE,this.onPasswordWillExpire),this.on(e.LOGIN_SUCCESS,this.onLogin),this.on(e.LOGOUT,this.logout),this.on(e.LOGOUT_ERROR,this.onError),this.on(e.LOGOUT_SUCCESS,this.onLogout),this.init(),this._options.checkAuth&&o.isLoggedIn().then(function(t){t&&n.emit(e.LOGIN_SUCCESS,{username:o.getUsername()})})}var o=n(1),i=n(37),s=n(!function(){var t=new Error('Cannot find module "virtual-dom/create-element"');throw t.code="MODULE_NOT_FOUND",t}()),a=n(!function(){var t=new Error('Cannot find module "virtual-dom/diff"');throw t.code="MODULE_NOT_FOUND",t}()),u=n(63),c=n(64),l=n(2),f=n(70),p=n(!function(){var t=new Error('Cannot find module "virtual-dom/patch"');throw t.code="MODULE_NOT_FOUND",t}()),h=n(71),d=n(73);r.prototype=Object.create(u.prototype),r.prototype.constructor=r,r.prototype.destroy=function(){this.update(null),this.removeAllListeners(),delete this._options,delete this._rootNode,delete this._state,delete this._tree,delete this.element},r.prototype.init=function(){this._tree=c(this._state),this._rootNode=s(this._tree),this.element.className=this.element.className+" coins-logon-widget",this.element.appendChild(this._rootNode)},r.prototype.login=function(){var t,e=this,n=r.EVENTS,s=this.element.querySelector("input[name=password]").value,a=this.element.querySelector("input[name=username]").value;return a&&s?(this.update({isLoading:!0}),o.login(a,s).done(function(t){var o=Date.parse(t.user.acctExpDate),i=r.DAY,s=Date.now(),a=Date.parse(t.user.passwordExpDate);e.update({isLoading:!1}),10*i>o-s?e.emit(n.LOGIN_ACCOUNT_WILL_EXPIRE,t):10*i>a-s?e.emit(n.LOGIN_PASSWORD_WILL_EXPIRE,t):e.emit(n.LOGIN_SUCCESS,t)}).fail(function(t){e.update({isLoading:!1}),"Password expired"===t?e.emit(n.LOGIN_PASSWORD_EXPIRED,t):"Account expired"===t?e.emit(n.LOGIN_ACCOUNT_EXPIRED,t):e.emit(n.LOGIN_ERROR,t)})):(t={},a||(t.usernameProps={errorMessage:"Missing username!",onKeyPress:i(this.onKeyPress,this)},this.emit(n.INVALID,{field:"username"})),s||(t.passwordProps={errorMessage:"Missing password!",onKeyPress:i(this.onKeyPress,this)},this.emit(n.INVALID,{field:"password"})),this.update(t))},r.prototype.logout=function(){var t=r.EVENTS,e=this;return this.update({isLoading:!0}),o.logout().done(function(n){e.update({isLoading:!1}),e.emit(t.LOGOUT_SUCCESS,n)}).fail(function(n){e.update({isLoading:!1}),e.emit(t.LOGOUT_ERROR,n)})},r.prototype.update=function(t){if(t!==this._state){this._state=l({},this._state,t);var e=c(this._state),n=a(this._tree,e);this._rootNode=p(this._rootNode,n),this._tree=e}},r.prototype.onAccountExpired=function(){var t=d.callOrReturn(this._options.messages.accountExpired);this.update({errorMessage:t})},r.prototype.onAccountWillExpire=function(t){var e=Date.parse(t.user.acctExpDate),n=Date.now(),o=d.callOrReturn(this._options.messages.accountWillExpire,[d.formatDay((e-n)/r.DAY)]);this.update({errorMessage:o})},r.prototype.onError=function(t){var e;e="undefined"!=typeof t?t.message||t.toString():"Unknown error!",this.update({errorMessage:e}),console.error(t)},r.prototype.onKeyPress=function(t){var e={errorMessage:null,onKeyPress:null};"username"===t.target.name&&this.update({usernameProps:e}),"password"===t.target.name&&this.update({passwordProps:e})},r.prototype.onLogin=function(t){this._options.redirect&&this._options.redirectUrl?window.location=this._options.redirectUrl:this.update({isLoggedIn:!0,username:t.username})},r.prototype.onLogout=function(){this.update({isLoggedIn:!1})},r.prototype.onPasswordExpired=function(){var t=d.callOrReturn(this._options.messages.passwordExpired);this.update({errorMessage:t})},r.prototype.onPasswordWillExpire=function(t){var e=Date.parse(t.user.passwordExpDate),n=Date.now(),o=d.callOrReturn(this._options.messages.passwordWillExpire,[d.formatDay((e-n)/r.DAY)]);this.update({errorMessage:o})},r.DAY=864e5,r.EVENTS={INVALID:"invalid",LOGIN:"login:init",LOGIN_ERROR:"login:error",LOGIN_ACCOUNT_EXPIRED:"login:accountExpired",LOGIN_ACCOUNT_WILL_EXPIRE:"login:accountWillExpire",LOGIN_PASSWORD_EXPIRED:"login:passwordExpired",LOGIN_PASSWORD_WILL_EXPIRE:"login:passwordWillExpire",LOGIN_SUCCESS:"login:success",LOGOUT:"logout:init",LOGOUT_ERROR:"logout:error",LOGOUT_SUCCESS:"logout:success"},t.exports=r},function(t,e,n){"use strict";function r(){return JSON.parse(localStorage.getItem(_))}function o(t){return localStorage.setItem(_,JSON.stringify(t)),r()}function i(t,e,n){var r=y.client.header(t,e,{credentials:n});return{Authorization:r.field}}function s(t){var e=u();return e.baseUrl+t}function a(){var t=u().authCookieName,e=location.hostname.split("."),n={path:"/"};return e.length>2?n.domain="."+e.slice(-2).join("."):n.domain=e.join("."),n?(m.remove(t,n),m.remove(t)):m.remove(t),o({date:Date.now(),status:"logged out"}),[].slice.call(arguments)}function u(){return w}function c(t){return v(w,t),u()}function l(t){return t.data[0]}function f(t){var e,n=t.statusText;return t.responseText&&(e=JSON.parse(t.responseText)||{},e=(e.error||{}).message||""),e||n||"Unknown error"}function p(){var t=r();return"username"in t?t.username:""}function h(t,e){var n=jQuery.Deferred();return jQuery.ajax({data:{password:btoa(e),username:btoa(t)},dataType:"json",type:"POST",url:s("/auth/keys"),xhrFields:{withCredentials:!0}}).done(function(t){var e=l(t);o(e),n.resolve(e)}).fail(function(t){n.reject(f(t))}),n.promise()}function d(){var t=r(),e="DELETE",n=s("/auth/keys/"+t.id);return jQuery.ajax({dataType:"json",headers:i(n,e,t),type:e,url:n,xhrFields:{withCredentials:!0}}).then(l,f).then(a,a)}function g(){var t,e,n=m.get(u().authCookieName),o=r();return n&&o&&(!(o instanceof Object)||"id"in o&&"key"in o)?(t="GET",e=s("/auth/cookies/"+n),jQuery.ajax({dataType:"json",type:t,url:e,xhrFields:{withCredentials:!0}}).then(function(t){return"error"in t&&!t.error},function(){return!1})):jQuery.Deferred().resolve(!1)}var v=n(2),m=n(35),y=n(36),_="COINS_AUTH_CREDENTIALS",w={authCookieName:"",baseUrl:""};-1!==document.cookie.split("; ").indexOf("REMOVED")&&(document.cookie="=REMOVED;path=/;domain=.mrn.org;expires=Thu, 01 Jan 1970 00:00:01 GMT;"),t.exports={getOptions:u,setOptions:c,login:h,logout:d,isLoggedIn:g,getUsername:p}},function(t,e,n){var r=n(3),o=n(30),i=o(r);t.exports=i},function(t,e,n){function r(t,e,n,p,h){if(!u(t))return t;var d=a(e)&&(s(e)||l(e)),g=d?void 0:f(e);return o(g||e,function(o,s){if(g&&(s=o,o=e[s]),c(o))p||(p=[]),h||(h=[]),i(t,e,s,r,n,p,h);else{var a=t[s],u=n?n(a,o,s,t,e):void 0,l=void 0===u;l&&(u=o),void 0===u&&(!d||s in t)||!l&&(u===u?u===a:a!==a)||(t[s]=u)}}),t}var o=n(4),i=n(5),s=n(13),a=n(8),u=n(17),c=n(12),l=n(25),f=n(28);t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function r(t,e,n,r,f,p,h){for(var d=p.length,g=e[n];d--;)if(p[d]==g)return void(t[n]=h[d]);var v=t[n],m=f?f(v,g,n,t,e):void 0,y=void 0===m;y&&(m=g,a(g)&&(s(g)||c(g))?m=s(v)?v:a(v)?o(v):[]:u(g)||i(g)?m=i(v)?l(v):u(v)?v:{}:y=!1),p.push(g),h.push(m),y?t[n]=r(m,g,f,p,h):(m===m?m!==v:v===v)&&(t[n]=m)}var o=n(6),i=n(7),s=n(13),a=n(8),u=n(18),c=n(25),l=n(26);t.exports=r},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function r(t){return i(t)&&o(t)&&a.call(t,"callee")&&!u.call(t,"callee")}var o=n(8),i=n(12),s=Object.prototype,a=s.hasOwnProperty,u=s.propertyIsEnumerable;t.exports=r},function(t,e,n){function r(t){return null!=t&&i(o(t))}var o=n(9),i=n(11);t.exports=r},function(t,e,n){var r=n(10),o=r("length");t.exports=o},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&r>=t}var r=9007199254740991;t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}t.exports=n},function(t,e,n){var r=n(14),o=n(11),i=n(12),s="[object Array]",a=Object.prototype,u=a.toString,c=r(Array,"isArray"),l=c||function(t){return i(t)&&o(t.length)&&u.call(t)==s};t.exports=l},function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return o(n)?n:void 0}var o=n(15);t.exports=r},function(t,e,n){function r(t){return null==t?!1:o(t)?l.test(u.call(t)):i(t)&&s.test(t)}var o=n(16),i=n(12),s=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,c=a.hasOwnProperty,l=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){return o(t)&&a.call(t)==i}var o=n(17),i="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){function r(t){var e;if(!s(t)||l.call(t)!=a||i(t)||!c.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return o(t,function(t,e){n=e}),void 0===n||c.call(t,n)}var o=n(19),i=n(7),s=n(12),a="[object Object]",u=Object.prototype,c=u.hasOwnProperty,l=u.toString;t.exports=r},function(t,e,n){function r(t,e){return o(t,e,i)}var o=n(20),i=n(23);t.exports=r},function(t,e,n){var r=n(21),o=r();t.exports=o},function(t,e,n){function r(t){return function(e,n,r){for(var i=o(e),s=r(e),a=s.length,u=t?a:-1;t?u--:++u<a;){var c=s[u];if(n(i[c],c,i)===!1)break}return e}}var o=n(22);t.exports=r},function(t,e,n){function r(t){return o(t)?t:Object(t)}var o=n(17);t.exports=r},function(t,e,n){function r(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(i(t)||o(t))&&e||0;for(var n=t.constructor,r=-1,c="function"==typeof n&&n.prototype===t,f=Array(e),p=e>0;++r<e;)f[r]=r+"";for(var h in t)p&&s(h,e)||"constructor"==h&&(c||!l.call(t,h))||f.push(h);return f}var o=n(7),i=n(13),s=n(24),a=n(11),u=n(17),c=Object.prototype,l=c.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&e>t}var r=/^\d+$/,o=9007199254740991;t.exports=n},function(t,e,n){function r(t){return i(t)&&o(t.length)&&!!A[I.call(t)]}var o=n(11),i=n(12),s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",p="[object Map]",h="[object Number]",d="[object Object]",g="[object RegExp]",v="[object Set]",m="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",w="[object Float32Array]",x="[object Float64Array]",O="[object Int8Array]",E="[object Int16Array]",L="[object Int32Array]",N="[object Uint8Array]",b="[object Uint8ClampedArray]",S="[object Uint16Array]",C="[object Uint32Array]",A={};A[w]=A[x]=A[O]=A[E]=A[L]=A[N]=A[b]=A[S]=A[C]=!0,A[s]=A[a]=A[_]=A[u]=A[c]=A[l]=A[f]=A[p]=A[h]=A[d]=A[g]=A[v]=A[m]=A[y]=!1;var U=Object.prototype,I=U.toString;t.exports=r},function(t,e,n){function r(t){return o(t,i(t))}var o=n(27),i=n(23);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){var r=n(14),o=n(8),i=n(17),s=n(29),a=r(Object,"keys"),u=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?s(t):i(t)?a(t):[]}:s;t.exports=u},function(t,e,n){function r(t){for(var e=u(t),n=e.length,r=n&&t.length,c=!!r&&a(r)&&(i(t)||o(t)),f=-1,p=[];++f<n;){var h=e[f];(c&&s(h,r)||l.call(t,h))&&p.push(h)}return p}var o=n(7),i=n(13),s=n(24),a=n(11),u=n(23),c=Object.prototype,l=c.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,c=s>1?n[s-1]:void 0;for("function"==typeof a?(a=o(a,c,5),s-=2):(a="function"==typeof c?c:void 0,s-=a?1:0),u&&i(n[0],n[1],u)&&(a=3>s?void 0:a,s=1);++r<s;){var l=n[r];l&&t(e,l,a)}return e})}var o=n(31),i=n(33),s=n(34);t.exports=r},function(t,e,n){function r(t,e,n){if("function"!=typeof t)return o;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,s){return t.call(e,n,r,o,i,s)}}return function(){return t.apply(e,arguments)}}var o=n(32);t.exports=r},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;if("number"==r?o(n)&&i(e,n.length):"string"==r&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}var o=n(8),i=n(24),s=n(17);t.exports=r},function(t,e){function n(t,e){if("function"!=typeof t)throw new TypeError(r);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=s,t.apply(this,a)}}var r="Expected a function",o=Math.max;t.exports=n},function(t,e,n){var r,o;/*!
	 * JavaScript Cookie v2.0.4
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */
!function(i){r=i,o="function"==typeof r?r.call(e,n,e,t):r,!(void 0!==o&&(t.exports=o))}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(n){function r(e,o,i){var s;if(arguments.length>1){if(i=t({path:"/"},r.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(u){}return o=encodeURIComponent(String(o)),o=o.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape),document.cookie=[e,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}e||(s={});for(var c=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,f=0;f<c.length;f++){var p=c[f].split("="),h=p[0].replace(l,decodeURIComponent),d=p.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{if(d=n&&n(d,h)||d.replace(l,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(u){}if(e===h){s=d;break}e||(s[h]=d)}catch(u){}}return s}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(e,n){r(e,"",t(n,{expires:-1}))},r.withConverter=e,r}return e()})},function(t,e){var n={internals:{}};n.client={header:function(t,e,r){var o={field:"",artifacts:{}};if(!t||"string"!=typeof t&&"object"!=typeof t||!e||"string"!=typeof e||!r||"object"!=typeof r)return o.err="Invalid argument type",o;var i=r.timestamp||n.utils.now(r.localtimeOffsetMsec),s=r.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return o.err="Invalid credentials object",o;if(-1===n.crypto.algorithms.indexOf(s.algorithm))return o.err="Unknown algorithm",o;"string"==typeof t&&(t=n.utils.parseUri(t));var a={ts:i,nonce:r.nonce||n.utils.randomString(6),method:e,resource:t.resource,host:t.host,port:t.port,hash:r.hash,ext:r.ext,app:r.app,dlg:r.dlg};o.artifacts=a,a.hash||!r.payload&&""!==r.payload||(a.hash=n.crypto.calculatePayloadHash(r.payload,s.algorithm,r.contentType));var u=n.crypto.calculateMac("header",s,a),c=null!==a.ext&&void 0!==a.ext&&""!==a.ext,l='Hawk id="'+s.id+'", ts="'+a.ts+'", nonce="'+a.nonce+(a.hash?'", hash="'+a.hash:"")+(c?'", ext="'+n.utils.escapeHeaderAttribute(a.ext):"")+'", mac="'+u+'"';return a.app&&(l+=', app="'+a.app+(a.dlg?'", dlg="'+a.dlg:"")+'"'),o.field=l,o},bewit:function(t,e){if(!t||"string"!=typeof t||!e||"object"!=typeof e||!e.ttlSec)return"";e.ext=null===e.ext||void 0===e.ext?"":e.ext;var r=n.utils.now(e.localtimeOffsetMsec),o=e.credentials;if(!(o&&o.id&&o.key&&o.algorithm))return"";if(-1===n.crypto.algorithms.indexOf(o.algorithm))return"";t=n.utils.parseUri(t);var i=r+e.ttlSec,s=n.crypto.calculateMac("bewit",o,{ts:i,nonce:"",method:"GET",resource:t.resource,host:t.host,port:t.port,ext:e.ext}),a=o.id+"\\"+i+"\\"+s+"\\"+e.ext;return n.utils.base64urlEncode(a)},authenticate:function(t,e,r,o){o=o||{};var i=function(e){return t.getResponseHeader?t.getResponseHeader(e):t.getHeader(e)},s=i("www-authenticate");if(s){var a=n.utils.parseAuthorizationHeader(s,["ts","tsm","error"]);if(!a)return!1;if(a.ts){var u=n.crypto.calculateTsMac(a.ts,e);if(u!==a.tsm)return!1;n.utils.setNtpOffset(a.ts-Math.floor((new Date).getTime()/1e3))}}var c=i("server-authorization");if(!c&&!o.required)return!0;var l=n.utils.parseAuthorizationHeader(c,["mac","ext","hash"]);if(!l)return!1;var f={ts:r.ts,nonce:r.nonce,method:r.method,resource:r.resource,host:r.host,port:r.port,hash:l.hash,ext:l.ext,app:r.app,dlg:r.dlg},p=n.crypto.calculateMac("response",e,f);if(p!==l.mac)return!1;if(!o.payload&&""!==o.payload)return!0;if(!l.hash)return!1;var h=n.crypto.calculatePayloadHash(o.payload,e.algorithm,i("content-type"));return h===l.hash},message:function(t,e,r,o){if(!t||"string"!=typeof t||!e||"number"!=typeof e||null===r||void 0===r||"string"!=typeof r||!o||"object"!=typeof o)return null;var i=o.timestamp||n.utils.now(o.localtimeOffsetMsec),s=o.credentials;if(!(s&&s.id&&s.key&&s.algorithm))return null;if(-1===n.crypto.algorithms.indexOf(s.algorithm))return null;var a={ts:i,nonce:o.nonce||n.utils.randomString(6),host:t,port:e,hash:n.crypto.calculatePayloadHash(r,s.algorithm)},u={id:s.id,ts:a.ts,nonce:a.nonce,hash:a.hash,mac:n.crypto.calculateMac("message",s,a)};return u},authenticateTimestamp:function(t,e,r){var o=n.crypto.calculateTsMac(t.ts,e);return o!==t.tsm?!1:(r!==!1&&n.utils.setNtpOffset(t.ts-Math.floor((new Date).getTime()/1e3)),!0)}},n.crypto={headerVersion:"1",algorithms:["sha1","sha256"],calculateMac:function(t,e,o){var i=n.crypto.generateNormalizedString(t,o),s=r["Hmac"+e.algorithm.toUpperCase()](i,e.key);return s.toString(r.enc.Base64)},generateNormalizedString:function(t,e){var r="hawk."+n.crypto.headerVersion+"."+t+"\n"+e.ts+"\n"+e.nonce+"\n"+(e.method||"").toUpperCase()+"\n"+(e.resource||"")+"\n"+e.host.toLowerCase()+"\n"+e.port+"\n"+(e.hash||"")+"\n";return e.ext&&(r+=e.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",e.app&&(r+=e.app+"\n"+(e.dlg||"")+"\n"),r},calculatePayloadHash:function(t,e,o){var i=r.algo[e.toUpperCase()].create();return i.update("hawk."+n.crypto.headerVersion+".payload\n"),i.update(n.utils.parseContentType(o)+"\n"),i.update(t),i.update("\n"),i.finalize().toString(r.enc.Base64)},calculateTsMac:function(t,e){var o=r["Hmac"+e.algorithm.toUpperCase()]("hawk."+n.crypto.headerVersion+".ts\n"+t+"\n",e.key);return o.toString(r.enc.Base64)}},n.internals.LocalStorage=function(){this._cache={},this.length=0,this.getItem=function(t){return this._cache.hasOwnProperty(t)?String(this._cache[t]):null},this.setItem=function(t,e){this._cache[t]=String(e),this.length=Object.keys(this._cache).length},this.removeItem=function(t){delete this._cache[t],this.length=Object.keys(this._cache).length},this.clear=function(){this._cache={},this.length=0},this.key=function(t){return Object.keys(this._cache)[t||0]}},n.utils={storage:new n.internals.LocalStorage,setStorage:function(t){var e=n.utils.storage.getItem("hawk_ntp_offset");n.utils.storage=t,e&&n.utils.setNtpOffset(e)},setNtpOffset:function(t){try{n.utils.storage.setItem("hawk_ntp_offset",t)}catch(e){console.error("[hawk] could not write to storage."),console.error(e)}},getNtpOffset:function(){var t=n.utils.storage.getItem("hawk_ntp_offset");return t?parseInt(t,10):0},now:function(t){return Math.floor(((new Date).getTime()+(t||0))/1e3)+n.utils.getNtpOffset()},escapeHeaderAttribute:function(t){return t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},parseContentType:function(t){return t?t.split(";")[0].replace(/^\s+|\s+$/g,"").toLowerCase():""},parseAuthorizationHeader:function(t,e){if(!t)return null;var n=t.match(/^(\w+)(?:\s+(.*))?$/);if(!n)return null;var r=n[1];if("hawk"!==r.toLowerCase())return null;var o=n[2];if(!o)return null;var i={},s=o.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(t,n,r){return-1===e.indexOf(n)||null===r.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)||i.hasOwnProperty(n)?void 0:(i[n]=r,"")});return""!==s?null:i},randomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=e.length,r=[],o=0;t>o;++o)r[o]=e[Math.floor(Math.random()*n)];return r.join("")},uriRegex:/^([^:]+)\:\/\/(?:[^@]*@)?([^\/:]+)(?:\:(\d+))?([^#]*)(?:#.*)?$/,parseUri:function(t){var e=t.match(n.utils.uriRegex);if(!e)return{host:"",port:"",resource:""};var r=e[1].toLowerCase(),o={host:e[2],port:e[3]||("http"===r?"80":"https"===r?"443":""),resource:e[4]};return o},base64urlEncode:function(t){var e=r.enc.Utf8.parse(t),n=r.enc.Base64.stringify(e);return n.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}};var r=r||function(t,e){var n={},r=n.lib={},o=function(){},i=r.Base={extend:function(t){o.prototype=this;var e=new o;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var o=0;t>o;o++)e[r+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((r+o)%4);else if(65535<n.length)for(o=0;t>o;o+=4)e[r+o>>>2]=n[o>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;e>r;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},u=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++){var o=e[r>>>2]>>>24-8*(r%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;t>r;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,a=o/(4*i),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*i,o=t.min(4*e,o),e){for(var u=0;e>u;u+=i)this._doProcessBlock(r,u);u=r.splice(0,e),n.sigBytes-=o}return new s.init(u,o)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=f.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}});var p=n.algo={};return n}(Math);!function(){var t=r,e=t.lib,n=e.WordArray,o=e.Hasher,i=[],e=t.algo.SHA1=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=0;80>c;c++){if(16>c)i[c]=0|t[e+c];else{var l=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=l<<1|l>>>31}l=(r<<5|r>>>27)+u+i[c],l=20>c?l+((o&s|~o&a)+1518500249):40>c?l+((o^s^a)+1859775393):60>c?l+((o&s|o&a|s&a)-1894007588):l+((o^s^a)-899497514),u=a,a=s,s=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(r+64>>>9<<4)+15]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=o._createHelper(e),t.HmacSHA1=o._createHmacHelper(e)}(),function(t){for(var e=r,n=e.lib,o=n.WordArray,i=n.Hasher,n=e.algo,s=[],a=[],u=function(t){return 4294967296*(t-(0|t))|0},c=2,l=0;64>l;){var f;t:{f=c;for(var p=t.sqrt(f),h=2;p>=h;h++)if(!(f%h)){f=!1;break t}f=!0}f&&(8>l&&(s[l]=u(t.pow(c,.5))),a[l]=u(t.pow(c,1/3)),l++),c++}var d=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7],p=0;64>p;p++){if(16>p)d[p]=0|t[e+p];else{var h=d[p-15],g=d[p-2];d[p]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+d[p-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[p-16]}h=f+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+a[p]+d[p],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&o^r&i^o&i),f=l,l=c,c=u,u=s+h|0,s=i,i=o,o=r,r=h+g|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[(o+64>>>9<<4)+14]=t.floor(r/4294967296),n[(o+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=r,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,o=4*r;n.sigBytes>o&&(n=t.finalize(n)),n.clamp();for(var i=this._oKey=n.clone(),s=this._iKey=n.clone(),a=i.words,u=s.words,c=0;r>c;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=r,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var o=0;n>o;o+=3)for(var i=(e[o>>>2]>>>24-8*(o%4)&255)<<16|(e[o+1>>>2]>>>24-8*((o+1)%4)&255)<<8|e[o+2>>>2]>>>24-8*((o+2)%4)&255,s=0;4>s&&n>o+.75*s;s++)t.push(r.charAt(i>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,o=r.charAt(64);o&&(o=t.indexOf(o),-1!=o&&(n=o));for(var o=[],i=0,s=0;n>s;s++)if(s%4){var a=r.indexOf(t.charAt(s-1))<<2*(s%4),u=r.indexOf(t.charAt(s))>>>6-2*(s%4);o[i>>>2]|=(a|u)<<24-8*(i%4),i++}return e.create(o,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.crypto.internals=r,"undefined"!=typeof t&&t.exports&&(t.exports=n)},function(t,e,n){var r=n(38),o=n(58),i=n(34),s=1,a=32,u=i(function(t,e,n){var i=s;if(n.length){var c=o(n,u.placeholder);i|=a}return r(t,i,e,n,c)});u.placeholder={},t.exports=u},function(t,e,n){function r(t,e,n,r,m,y,_,w){var x=e&p;if(!x&&"function"!=typeof t)throw new TypeError(g);var O=r?r.length:0;if(O||(e&=~(h|d),r=m=void 0),O-=m?m.length:0,e&d){var E=r,L=m;r=m=void 0}var N=x?void 0:u(t),b=[t,e,n,r,m,E,L,y,_,w];if(N&&(c(b,N),e=b[1],w=b[9]),b[9]=null==w?x?0:t.length:v(w-O,0)||0,e==f)var S=i(b[0],b[2]);else S=e!=h&&e!=(f|h)||b[4].length?s.apply(void 0,b):a.apply(void 0,b);var C=N?o:l;return C(S,b)}var o=n(39),i=n(41),s=n(44),a=n(61),u=n(50),c=n(62),l=n(59),f=1,p=2,h=32,d=64,g="Expected a function",v=Math.max;t.exports=r},function(t,e,n){var r=n(32),o=n(40),i=o?function(t,e){return o.set(t,e),t}:r;t.exports=i},function(t,e,n){(function(e){var r=n(14),o=r(e,"WeakMap"),i=o&&new o;t.exports=i}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t,n){function r(){var o=this&&this!==e&&this instanceof r?i:t;return o.apply(n,arguments)}var i=o(t);return r}var o=n(42);t.exports=r}).call(e,function(){return this}())},function(t,e,n){function r(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=o(t.prototype),r=t.apply(n,e);return i(r)?r:n}}var o=n(43),i=n(17);t.exports=r},function(t,e,n){var r=n(17),o=function(){function t(){}return function(e){if(r(e)){t.prototype=e;var n=new t;t.prototype=void 0}return n||{}}}();t.exports=o},function(t,e,n){(function(e){function r(t,n,x,O,E,L,N,b,S,C){function A(){for(var d=arguments.length,g=d,v=Array(d);g--;)v[g]=arguments[g];if(O&&(v=i(v,O,E)),L&&(v=s(v,L,N)),D||R){var _=A.placeholder,P=l(v,_);if(d-=P.length,C>d){var k=b?o(b):void 0,B=w(C-d,0),H=D?P:void 0,G=D?void 0:P,V=D?v:void 0,W=D?void 0:v;n|=D?m:y,n&=~(D?y:m),T||(n&=~(p|h));var F=[t,n,x,V,H,W,G,k,S,B],z=r.apply(void 0,F);return u(t)&&f(z,F),z.placeholder=_,z}}var X=I?x:this,$=j?X[t]:t;return b&&(v=c(v,b)),U&&S<v.length&&(v.length=S),this&&this!==e&&this instanceof A&&($=M||a(t)),$.apply(X,v)}var U=n&_,I=n&p,j=n&h,D=n&g,T=n&d,R=n&v,M=j?void 0:a(t);return A}var o=n(6),i=n(45),s=n(46),a=n(42),u=n(47),c=n(57),l=n(58),f=n(59),p=1,h=2,d=4,g=8,v=16,m=32,y=64,_=128,w=Math.max;t.exports=r}).call(e,function(){return this}())},function(t,e){function n(t,e,n){for(var o=n.length,i=-1,s=r(t.length-o,0),a=-1,u=e.length,c=Array(u+s);++a<u;)c[a]=e[a];for(;++i<o;)c[n[i]]=t[i];for(;s--;)c[a++]=t[i++];return c}var r=Math.max;t.exports=n},function(t,e){function n(t,e,n){for(var o=-1,i=n.length,s=-1,a=r(t.length-i,0),u=-1,c=e.length,l=Array(a+c);++s<a;)l[s]=t[s];for(var f=s;++u<c;)l[f+u]=e[u];for(;++o<i;)l[f+n[o]]=t[s++];return l}var r=Math.max;t.exports=n},function(t,e,n){function r(t){var e=s(t),n=a[e];if("function"!=typeof n||!(e in o.prototype))return!1;if(t===n)return!0;var r=i(n);return!!r&&t===r[0]}var o=n(48),i=n(50),s=n(52),a=n(54);t.exports=r},function(t,e,n){function r(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=s,this.__views__=[]}var o=n(43),i=n(49),s=Number.POSITIVE_INFINITY;r.prototype=o(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e){function n(){}t.exports=n},function(t,e,n){var r=n(40),o=n(51),i=r?function(t){return r.get(t)}:o;t.exports=i},function(t,e){function n(){}t.exports=n},function(t,e,n){function r(t){for(var e=t.name+"",n=o[e],r=n?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==t)return i.name}return e}var o=n(53);t.exports=r},function(t,e){var n={};t.exports=n},function(t,e,n){function r(t){if(u(t)&&!a(t)&&!(t instanceof o)){if(t instanceof i)return t;if(f.call(t,"__chain__")&&f.call(t,"__wrapped__"))return c(t)}return new i(t)}var o=n(48),i=n(55),s=n(49),a=n(13),u=n(12),c=n(56),l=Object.prototype,f=l.hasOwnProperty;r.prototype=s.prototype,t.exports=r},function(t,e,n){function r(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}var o=n(43),i=n(49);r.prototype=o(i.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){function r(t){return t instanceof o?t.clone():new i(t.__wrapped__,t.__chain__,s(t.__actions__))}var o=n(48),i=n(55),s=n(6);t.exports=r},function(t,e,n){function r(t,e){for(var n=t.length,r=s(e.length,n),a=o(t);r--;){var u=e[r];t[r]=i(u,n)?a[u]:void 0}return t}var o=n(6),i=n(24),s=Math.min;t.exports=r},function(t,e){function n(t,e){for(var n=-1,o=t.length,i=-1,s=[];++n<o;)t[n]===e&&(t[n]=r,s[++i]=n);return s}var r="__lodash_placeholder__";t.exports=n},function(t,e,n){var r=n(39),o=n(60),i=150,s=16,a=function(){var t=0,e=0;return function(n,a){var u=o(),c=s-(u-e);if(e=u,c>0){if(++t>=i)return n}else t=0;return r(n,a)}}();t.exports=a},function(t,e,n){var r=n(14),o=r(Date,"now"),i=o||function(){return(new Date).getTime()};t.exports=i},function(t,e,n){(function(e){function r(t,n,r,s){function a(){for(var n=-1,o=arguments.length,i=-1,l=s.length,f=Array(l+o);++i<l;)f[i]=s[i];for(;o--;)f[i++]=arguments[++n];var p=this&&this!==e&&this instanceof a?c:t;return p.apply(u?r:this,f)}var u=n&i,c=o(t);return a}var o=n(42),i=1;t.exports=r}).call(e,function(){return this}())},function(t,e,n){function r(t,e){var n=t[1],r=e[1],g=n|r,v=f>g,m=r==f&&n==l||r==f&&n==p&&t[7].length<=e[8]||r==(f|p)&&n==l;if(!v&&!m)return t;r&u&&(t[2]=e[2],g|=n&u?0:c);var y=e[3];if(y){var _=t[3];t[3]=_?i(_,y,e[4]):o(y),t[4]=_?a(t[3],h):o(e[4])}return y=e[5],y&&(_=t[5],t[5]=_?s(_,y,e[6]):o(y),t[6]=_?a(t[5],h):o(e[6])),y=e[7],y&&(t[7]=o(y)),r&f&&(t[8]=null==t[8]?e[8]:d(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=g,t}var o=n(6),i=n(45),s=n(46),a=n(58),u=1,c=4,l=8,f=128,p=256,h="__lodash_placeholder__",d=Math.min;t.exports=r},function(t,e,n){var r;(function(){"use strict";function e(){}function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}var s=e.prototype,a=this,u=a.EventEmitter;s.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp){e={};for(n in r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n])}else e=r[t]||(r[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},s.addListener=function(t,e){var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},s.on=i("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=i("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&(n=o(i[r],e),-1!==n&&i[r].splice(n,1));return this},s.off=i("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var r,o,i=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)i.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(o=e[r])&&("function"==typeof o?i.call(this,r,o):s.call(this,r,o));return this},s.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},s.removeAllListeners=i("removeEvent"),s.emitEvent=function(t,e){var n,r,o,i,s,a=this.getListenersAsObject(t);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=n.length;o--;)r=n[o],r.once===!0&&this.removeListener(t,r.listener),s=r.listener.apply(this,e||[]),s===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},s.trigger=i("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},s._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return a.EventEmitter=u,e},r=function(){return e}.call(a,n,a,t),!(void 0!==r&&(t.exports=r))}).call(this)},function(t,e,n){"use strict";function r(t){var e=t.errorMessage,n=(t.inputs,"undefined"!=typeof t.isLoading?t.isLoading:!1),r="undefined"!=typeof t.isLoggedIn?t.isLoggedIn:!1,l=t.onRedirectClick,f=t.onSubmit,p=t.passwordProps,h=t.username,d=t.usernameProps,g=[],v="coins-logon-widget-form";return r?g.push(u({username:h}),o({style:"secondary",text:"Log Out",type:"submit"},{onClick:l,text:"Go to COINS →"})):(e&&(g.push(a({text:e})),v+=" coins-logon-widget-form-error"),g.push(i(d),i(p),o({text:"Log In",type:"submit"}))),n&&(g.push(s()),v+=" coins-logon-widget-form-loading"),new c("form",{className:v,onsubmit:function(t){t.preventDefault(),f(t)},method:"post"},g)}var o=n(65),i=n(66),s=n(67),a=n(68),u=n(69),c=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VNode;t.exports=r},function(t,e,n){"use strict";function r(t){var e="coins-logon-widget-button",n=t.onClick,r=t.style||"primary",o=t.text,a=t.type||"button";e+=" coins-logon-widget-button-"+r;var u={className:e,type:a};return n&&(u.onClick=n),new i("button",u,[new s(o)])}function o(t){var e=arguments.length>1?[].slice.call(arguments).map(r):[r(t)],n="coins-logon-widget-button-group";return new i("div",{className:n},e)}var i=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VNode,s=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VText;t.exports=o},function(t,e,n){"use strict";function r(t){var e=t.errorMessage,n=t.id,r=t.name,s=t.type||"text",a="undefined"!=typeof t.value?t.value:"",u="coins-logon-widget-form-group",c=r.charAt(0).toUpperCase()+r.substr(1),l={className:"coins-logon-widget-input",id:n,name:r,placeholder:c,type:s,value:a},f=[new o("label",{className:"coins-logon-widget-label coins-logon-widget-visuallyhidden","for":n},[new i(c)])];return e&&(f.push(new o("span",{"aria-hidden":"true",className:"coins-logon-widget-icon"}),new o("span",{className:"coins-logon-widget-input-message"},[new i(e)])),u+=" coins-logon-widget-form-group-error",l.onkeypress=function(e){t.onKeyPress(e)}),f.splice(1,0,new o("input",l)),new o("div",{className:u},f)}var o=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VNode,i=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VText;t.exports=r},function(t,e,n){"use strict";function r(){var t="http://www.w3.org/2000/svg";return new o("div",{className:"coins-logon-widget-indicator"},[new o("svg",void 0,[new o("title",void 0,[new i("Loading…")],void 0,t),new o("circle",{attributes:{cx:"20",cy:"20",fill:"none",r:"8","stroke-width":"2","stroke-miterlimit":"4"}},void 0,void 0,t)],void 0,t)])}var o=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VNode,i=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VText;t.exports=r},function(t,e,n){"use strict";function r(t){var e,n={className:["coins-logon-widget-notification","coins-logon-widget-notification-error"].join(" ")},r=t.text;return Array.isArray(r)?e=r:"string"==typeof t.children&&(-1!==r.indexOf("<")&&-1!==r.indexOf(">")?n.innerHTML=r:e=[new i(r)]),new o("div",n,e?e:void 0)}var o=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VNode,i=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VText;t.exports=r},function(t,e,n){"use strict";function r(t){var e="coins-logon-widget-status",n=t.username,r=n?[new i("Logged in as "),new o("strong",void 0,[new i(n)]),new i(".")]:[new i("Logged in.")];return new o("p",{className:e},r)}var o=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VNode,i=n(!function(){var t=new Error('Cannot find module "virtual-dom"');throw t.code="MODULE_NOT_FOUND",t}()).VText;t.exports=r},function(t,e){"use strict";t.exports={accountExpired:"Your account has expired.",accountWillExpire:function(t){return"Your account will expire in "+t+"."},passwordExpired:"Your password has expired.",passwordWillExpire:function(t){return"Your password will expire in "+t+"."}}},function(t,e,n){function r(t){var e=++i;return o(t)+e}var o=n(72),i=0;t.exports=r},function(t,e){function n(t){return null==t?"":t+""}t.exports=n},function(t,e){"use strict";function n(t){if(!t)throw new TypeError("Element required");if(!(t instanceof Node))throw new TypeError("Expected element to be a DOM node");return t}function r(t,e){if(!t||"string"!=typeof t)throw new TypeError(["expected string",e?" ("+e+")":"",", received: ",t.toString()].join(""));return t}function o(t,e){return t instanceof Function?t.apply(null,e):t}function i(t){return 1>t?"less than 1 day":""+Math.ceil(t)+" days"}t.exports={assertElement:n,assertString:r,callOrReturn:o,formatDay:i}}])});